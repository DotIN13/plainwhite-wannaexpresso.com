(function(){function n(){var n,e=0,t={},o=window.location.search.substring(1),s=o.split("&");for(e=0;e<s.length;e++)n=s[e].split("="),void 0===t[n[0]]?t[n[0]]=n[1]:"string"==typeof t[n[0]]?t[n[0]]=[t[n[0]],n[1]]:t[n[0]].push(n[1]);return t}function e(n){return n?($("[rel='1']").toggleClass("hover"),!1):($("[rel='1']").toggleClass("hover"),!0)}var t,o=(t=window.location.href.split("?")[0],function(n){"string"==typeof n?window.history.replaceState(null,"",t+n):window.history.replaceState(null,"",t)});$(document).ready(function(){function e(){var n,e=0;for(n=0;n<c.length;n++)g.push(e),e+=c.eq(n).find(".item").length;g.push(e)}function t(n){if(!n)return l;var e=r.filter('[data-encode="'+n+'"]');return 0===e.length?l:e}function s(n){n&&(n.addClass("focus"),n.addClass("visited"),u&&!u.is(n)&&u.removeClass("focus"),u=n)}function a(n,e){var a,i,r,l,u,g={};for(i=0;i<f.length;i++)for(a=f[i],r=0;r<a.length;r++)if(""===n||void 0===n)g[i]||(g[i]={}),g[i][r]=!0;else{var p=a.eq(r).data("tags").split(",");for(l=0;l<p.length;l++)if(p[l]===n){g[i]||(g[i]={}),g[i][r]=!0;break}}for(i=0;i<f.length;i++)for(g[i]&&c.eq(i).removeClass("d-none"),g[i]||c.eq(i).addClass("d-none"),r=0;r<f[i].length;r++)g[i]&&g[i][r]?f[i].eq(r).removeClass("d-none"):f[i].eq(r).addClass("d-none");h||(d.removeClass("d-none"),h=!0),e?(s(e),u=e.attr("data-encode"),""===u||"string"!=typeof u?o():o("?tag="+u)):s(t(n))}var i=$(".js-tags"),r=i.find(".tag-button"),l=i.find(".tag-button--all"),d=$(".js-result"),c=d.find("section"),f=[],u=null,g=[],h=!1;c.each(function(){f.push($(this).find(".item"))});var p=n(),v=p.tag;e(),a(v),i.on("click","a",function(){a($(this).data("encode"),$(this))})});var s=!1;$("#show-tags").click(function(){s=e(s),$(".icon-expand_more").length?$(".icon-expand_more").removeClass("icon-expand_more").addClass("icon-expand_less"):$(".icon-expand_less").removeClass("icon-expand_less").addClass("icon-expand_more")})})();