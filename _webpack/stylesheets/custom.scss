/* Variables */
$linkColor: #9C27B0;
$smallMobileW: 480px;
$mobileW: 600px;
$midScreenW: 1024px;
$bigScreenW: 1600px;

$leftWidth: 220px;
$maxWidth: 1000px;

/* Mixins */
@mixin button {
    background: #e3e3e3;
    cursor: pointer;
    font-size: 15px;
    color: #616161;
    margin: 0 4px;
    transition: background-color 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;

    &:hover {
        background: $linkColor;
        color: white;
    }
}

@mixin sans-serif {
    font-family: "Raleway", -apple-system, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", STHeiti, "Microsoft YaHei", "Microsoft JhengHei", "Source Han Sans SC", "Noto Sans CJK SC", "Source Han Sans CN", "Noto Sans SC", "Source Han Sans TC", "Noto Sans CJK TC", "WenQuanYi Micro Hei", SimSun, sans-serif;
    font-display: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", STHeiti, "Microsoft YaHei", "Microsoft JhengHei", "Source Han Sans SC", "Noto Sans CJK SC", "Source Han Sans CN", "Noto Sans SC", "Source Han Sans TC", "Noto Sans CJK TC", "WenQuanYi Micro Hei", SimSun, sans-serif;
}

@mixin serif {
    font-family: "Merriweather", -apple-system, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", STHeiti, "Microsoft YaHei", "Microsoft JhengHei", "Source Han Sans SC", "Noto Sans CJK SC", "Source Han Sans CN", "Noto Sans SC", "Source Han Sans TC", "Noto Sans CJK TC", "WenQuanYi Micro Hei", SimSun, sans-serif;
    font-display: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", STHeiti, "Microsoft YaHei", "Microsoft JhengHei", "Source Han Sans SC", "Noto Sans CJK SC", "Source Han Sans CN", "Noto Sans SC", "Source Han Sans TC", "Noto Sans CJK TC", "WenQuanYi Micro Hei", SimSun, sans-serif;
}

@mixin pager {
    list-style: none;
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-template-rows: auto;
    grid-template-areas: "next prev";
    column-gap: 5%;

    .pager--prev {
        grid-area: prev;
    }

    .pager--next {
        grid-area: next;
    }
}

@import "ext/fonts";
@import "ext/normalize";
@import "syntax";
@import "utility";
@import "fontello";
@import "search";
@import "tagcloud";
@import "moods";
@import "toggle";
@import "dark";

/* General */

*,
*:before,
*:after {
    box-sizing: border-box;
}

body {
    @include sans-serif();
    font-size: 16px;
    line-height: 1.2em;
    margin: 0;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

img,
embed,
object,
video {
    max-width: 100%;
}

a {
    color: #000;
    transition: color 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;

    &:hover {
        color: $linkColor;
    }
}

h2 {
    margin: 0.7em 0;

    @media screen and (max-width: $mobileW) {
        margin: 0.3em 0;
    }
}

main {
    margin: 0 90px;
    display: grid;
    grid-template-columns: [about-start] 220px [about-end content-start] 1fr [content-end];
    grid-row: auto;
    grid-template-areas: "about content";

    @media screen and (min-width: $bigScreenW + 1) {
        grid-template-columns: [about-start] 280px [about-end content-start] 1fr [content-end];
        margin: 0 auto;
        max-width: 1360px;
    }

    @media screen and (max-width: 1280px) {
        margin: 0 75px;
    }

    @media screen and (max-width: $midScreenW) {
        grid-template-columns: auto;
        grid-template-rows: [about-start] auto [about-end content-start] auto [content-end footer-start] auto [footer-end];
        grid-template-areas: "about""content""footer";
        row-gap: 30px;
        padding: 0 30px;
        margin: 0 35px;
    }

    @media screen and (max-width: $mobileW) {
        margin: 0 10px;
    }

    @media screen and (max-width: $smallMobileW) {
        padding: 0 20px;
        margin: 0;
    }

    section.about {
        grid-area: about;
    }

    .content {
        grid-area: content;
        overflow: auto;
    }

    footer.about.condensed {
        grid-area: footer;
    }
}

/* About */
.about {
    display: flex;
    height: 100vh;
    padding-top: 3vh;
    position: sticky;
    top: 0;

    @media screen and (max-width: $midScreenW) {
        position: inherit;
        padding-top: 15vh;
        height: auto;
    }

    @media screen and (max-width: $mobileW) {
        padding-top: 5vh;
    }

    justify-content: center;
    flex-direction: column;
    align-items: center;

    h2 {
        font-size: 22px;
        margin-top: 25px;
        margin-bottom: 0;
        color: #222222;
        font-weight: normal;
    }

    .tagline {
        font-size: 22px;
        margin-top: 0;
        color: #666;
        white-space: pre-wrap;
        line-height: normal;
        text-align: center;
        transition: color 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;

        &:hover {
            color: $linkColor;
        }
    }

    .about-header {
        display: flex;
        flex-direction: column;

        .about-title {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 17px;
        }
    }

    #avatar img {
        border-radius: 0.2rem;
        cursor: pointer;

        @media screen and (max-width: $midScreenW) {
            max-height: 105px;
            width: auto;
        }

        @media screen and (max-width: $mobileW) {
            max-height: 90px;
        }
    }

    a {
        text-decoration: none;
    }

    p {
        text-align: center;
    }

    .buttons {
        margin-bottom: 0.3em;
    }

    .button {
        border-radius: 24px;
        padding: 5px 10px;
        @include button();
    }

    .about-footer {
        margin: 1em 0;

        div {
            text-align: center;

            a {
                color: #666;
                transition: color 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;

                &:hover {
                    color: $linkColor
                }
            }
        }
    }

}

section.about {

    /* Responsive about */
    @media screen and (max-width: $midScreenW) {

        .condensed {
            display: none;
        }

        .about-header {
            align-items: start;
            align-self: start;

            .about-title {
                flex-direction: row;
                align-items: flex-end;
                margin-bottom: 10px;

                h2 {
                    margin: 10px;
                }
            }

            .tagline {
                font-size: 1.6em;
                margin-bottom: 0px;
                text-align: left;
            }
        }
    }
}

footer.about.condensed {
    display: none;
    padding-top: 40px;

    @media screen and (max-width: $midScreenW) {
        display: flex;
        flex-direction: column;
        align-items: center;
        align-self: center;
        margin: 20px 0;
        border-top: 1px solid #eee;
    }
}

#title {
    a {
        text-decoration: none;
    }
}

.social {
    list-style: none;
    padding: 0;

    .fa-stack {
        font-size: 1em;
    }

    li {
        display: inline-block;
    }
}

.navigation {

    ul {
        list-style-type: none;
        padding: 0;
        margin-top: 0;
        margin-bottom: 0;

        li:last-child {
            a {
                border-bottom: 0;
            }
        }

        a {
            display: block;
            @include serif();
            font-weight: 300;
            text-align: center;
            padding: 1rem 0;
            text-decoration: none;
            border-bottom: 1px solid #ececec;

            @media screen and (max-width: $mobileW) {
                padding: 1em 0;
            }
        }
    }
}

.post-wrapper {
    border-bottom: 1px solid #ececec;
    margin-bottom: 1rem;
    padding-bottom: 1rem;
}

.post-categories {
    margin: 0;
    padding: 0;

    a {
        @include button();
        font-size: 14px;
        float: left;
        border-radius: 2px;
        margin-right: 10px;
        margin-bottom: 10px;
        text-decoration: none;
        padding: 5px 20px;
    }
}

.post-date {
    margin-right: 10px;
    color: #555;
    min-width: 150px;
    margin-top: auto;
    margin-bottom: auto;
}

i.icon-calendar {
    margin: 0 .4em 0 .2em;
}

.post-meta {
    display: flex;
    justify-content: space-between;
    align-items: center;

    @media screen and (max-width: $mobileW) {
        flex-direction: column-reverse;
        align-items: baseline;

        .post-date {
            margin-bottom: 16px;
        }
    }
}

.post-link {
    text-decoration: none;
    transition: none;

    h2,
    h3 {
        transition: color 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;
    }
}

.multilingual-title {
    display: flex;
    justify-content: flex-start;
    align-items: stretch;
    margin-top: 20px;

    .post-title {
        margin-top: 0;
    }

    a.translate {
        line-height: 1.2em;
        margin: 0 0.5em 10px 0;
        border-radius: 2px;
        padding: 4px 8px;
        display: flex;
        align-items: center;
        font-size: 20px;

        &:hover {
            background-color: $linkColor;
            color: white;
        }
    }
}

.post-title {
    line-height: 1.2em;
    font-size: 28px;
    margin-bottom: 10px;
}

.post-subtitle {
    margin-top: 0;
}

.post-container,
.posts-container,
.archive-container {
    list-style-type: none;
    margin: 45px auto;
    width: 80%;

    @media screen and (max-width: $midScreenW) {
        width: auto;
        margin: 0;
        padding: 0;
    }

    ul {
        list-style-type: none;
        padding-left: 0;
    }
}

.posts-container {

    .post-title {
        margin-top: 40px;
    }
}

.post {
    @include serif();
    font-weight: 400;
    color: #222;
    line-height: 1.9em;

    a {
        color: $linkColor;
        text-decoration: none;
        transition: border-bottom 0.4s;

        &:hover {
            border-bottom: 0.5px solid $linkColor;
        }
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
        @include sans-serif();
    }

    .post-img {
        margin-top: 1.5em;
    }

    /* Images */
    a+em {
        @include sans-serif();
        font-size: 0.9em;
        color: #666;
        display: block;
        margin-bottom: 1em;
        text-align: center;
    }

    img {
        margin-left: auto;
        margin-right: auto;
        display: block;
        max-width: 76%;
        max-height: 64vh;
        height: auto;
        width: auto;

        @media screen and (max-width: $mobileW) {
            width: 95%;
            max-width: none;
            max-height: none;
        }

        &:focus,
        &:hover {
            cursor: zoom-in;
        }
    }
}

.button {
    background-color: #e3e3e3;
}

/* pagination */
.pagination-links {
    @include pager();
    padding-top: 45px;

    .pager--prev {
        justify-self: end;
    }

    a {
        @include button();
        text-decoration: none;
        padding: 6px 25px;
        border-radius: 2px;
        display: inline-block;
        min-width: 95px;
    }
}

.post-pager {
    @include pager();

    li {
        display: flex;

        a {
            width: 100%;
            line-height: 1.2em;
            font-size: 0.95em;
            text-decoration: none;
            background-color: #ededed;
            padding: 6px 25px;
            border-radius: 2px;
            display: inline-block;
            min-width: 95px;
            text-align: center;

            span {
                font-size: 0.8em;
                color: #555;
                transition: color 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;
            }

            &:hover {
                background-color: $linkColor;
                color: white;

                span {
                    color: white;
                }
            }
        }
    }
}

select.sel-lang {
    padding: 0px 1px 2px 1px;
    margin-top: 40px;
    margin-bottom: 20px;
    background: white;
    border: none;
    border-bottom: solid 1px black;
}

/* Vcomments */
#vcomments.v .vwrap .vheader .vinput {
    border-bottom: 1px solid #dedede;
    transition: border-color 0.3s;

    &:hover,
    &:focus {
        border-bottom: 1px solid #ba68c8;
    }
}

#vcomments.v {

    .vbtn:active,
    .vbtn:hover {
        color: #fff;
        border-color: #ba68c8;
        background-color: #ba68c8;
    }

    a:before {
        background: $linkColor;
    }

    .vpower.txt-right {
        display: none;
    }

    .vemoji-btn {
        @extend .icon-insert_emoticon;
    }

    .vpreview-btn {
        @extend .icon-pageview;
    }

    .vemoji-btn,
    .vpreview-btn {
        font-size: 1.5em;
        color: #BDBDBD;
        transition: color 0.3s;
        @extend .fa-2x;
        @include fontello();

        &:hover,
        &.actived {
            color: $linkColor;
        }
    }
}

#vcomments.v .vwrap {
    border: 2px solid #f0f0f0;
    border-radius: 4px;
    margin-bottom: 10px;
    margin-top: 30px;
    overflow: hidden;
    position: relative;
    padding: 10px;
}

/* video iframe */
.video-iframe {
    position: relative;
    width: 100%;
    height: 0;
    padding-bottom: 75%;
}

.video-iframe iframe {
    position: absolute;
    width: 100%;
    height: 100%;
    left: 0;
    top: 0;
}

/* Block Quote */
blockquote {
    color: #555;
}

blockquote.g_bq {
    font: italic 600 32px EB Garamond, serif;
    font-style: italic;
    quotes: '\201c''\201d''\2018''\2019';
    display: block;
    margin-block-start: 1em;
    margin-block-end: 1em;
    margin-inline-start: 40px;
    margin-inline-end: 40px;
    color: #282828;
    border: none;

    &:before {
        content: open-quote;
    }

    &:after {
        content: close-quote;
    }
}

/* GitHub table styling */
table {
    padding: 0;
    word-break: initial;
}

table tr {
    border-top: 1px solid #dfe2e5;
    margin: 0;
    padding: 0;
}

table tr:nth-child(2n),
thead {
    background-color: #f8f8f8;
}

table tr th {
    font-weight: bold;
    border: 1px solid #dfe2e5;
    border-bottom: 0;
    margin: 0;
    padding: 6px 13px;
}

table tr td {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 6px 13px;
}

table tr th:first-child,
table tr td:first-child {
    margin-top: 0;
}

table tr th:last-child,
table tr td:last-child {
    margin-bottom: 0;
}