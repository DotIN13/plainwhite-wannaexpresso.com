{% if page.title == "Archive" %}
<script src="/js/archive.min.js"></script>
{% endif %}

{% if page.layout == "post" %}
<!-- Fancybox -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>
<script>
  $('[data-fancybox="gallery"]').fancybox({
    buttons: [
      'download',
      'thumbs',
      'close'
    ]
  });
</script>
{% endif %}

{% if page.layout == "page" or page.title == "Archive" %}
<!-- Simple Jekyll Search -->
<script src="/js/simple-jekyll-search.min.js"></script>
<script>
  window.onload = function () {
    var sjs = SimpleJekyllSearch({
      searchInput: document.getElementById('searchbar'),
      resultsContainer: document.getElementById('search-results'),
      json: '/search.json',
      searchResultTemplate: '<a href="{url}" target="_blank">{title}</a>',
      noResultsText: ''
    });

    var $labelGroup = document.querySelector(".posts-labelgroup");
    var $searchbar = document.getElementById("searchbar");
    var $postLabel = document.getElementById("posts-label");
    var $searchResults = document.querySelector(".search-results");
    var labelWidth = $postLabel.scrollWidth;
    $postLabel.style.width = labelWidth + "px";

    $labelGroup.addEventListener("click", function () {
      $searchbar.focus();
      $labelGroup.setAttribute("class", "posts-labelgroup focus-within");
      $postLabel.style.width = "0";
      $searchResults.style.display = null;
      $labelGroup.onmouseleave = function () {
        document.body.onclick = searchCollapse;
      };
    }, false);

    var searchCollapse = function (e) {
      $searchResults.style.display = "none";
      $labelGroup.setAttribute("class", "posts-labelgroup");
      $postLabel.style.width = labelWidth + "px";
      document.body.onclick = null;
    };
  }
</script>
{% endif %}

<!-- Link _blank -->
<script type="text/javascript">
  $(document).ready(function () {
    $('a[href^="http"]').each(function () {
      $(this).attr('target', '_blank');
    });
  });
</script>