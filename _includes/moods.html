{% include posts-label.html type='moods' search=false %}
<ul class="mood-track" data-mood-focus="0">
  {% assign sorted_moods = site.moods | sort: 'date' | reverse %}
  {% for mood in sorted_moods %}
  <li class="mood" data-micromodal-trigger="{{ mood.id | escape }}" href="#">
    <div class="mood-excerpt">
      {% if mood.header-image %}
      <div class="mood-header-image" data-caption="{{ mood.title }}" data-path="{{ mood.header-image }}" data-responsive=true></div>
      {% endif %}
      <div class="mood-content">
        <h2>{{ mood.title }}</h2>
        <article>
          {% if mood.header-image %}{{ mood.content | smart_truncate: 88 }}{% else %}{{ mood.content | smart_truncate: 168 }}{% endif %}
        </article>
      </div>
    </div>
    <div class="mood-meta meta-like">
      <div class="mood-created-at">
        <i class="icon-calendar"></i>
        <span class="mood-time">{{ mood.date | date: site.plainwhite.mood_time_format }} Â· </span>
        <span class="mood-date">{{ mood.date | date: site.plainwhite.mood_date_format }}</span>
      </div>
      <div class="mood-like like-button"><span class="heart" data-like="{{ mood.id }}" data-liked="false"></span></div>
      <div class="mood-like-count like-count"></div>
    </div>
  </li>
  {% endfor %}
  <li class="mood--placeholder">.</li>
</ul>
<button aria-label="previous mood item" class="mood-button--prev mood-button hide">
  <div class="mood-arrow--prev mood-arrow"></div>
</button>
<button aria-label="next mood item" class="mood-button--next mood-button">
  <div class="mood-arrow--next mood-arrow"></div>
</button>

<div class="mood-modals">
  {% for mood in sorted_moods %}
  {% assign timestamp_id = mood.date | date: '%s' %}
  <div class="modal micromodal-slide mood-full" id="{{ mood.id | escape }}" aria-hidden="true">
    <div class="modal__overlay" tabindex="-1" data-micromodal-close>
      <div class="modal__container" role="dialog" aria-modal="true" aria-labelledby="modal-{{ mood.id | escape }}-title">
        <header class="modal__header">
          <h2 class="modal__title" id="modal-{{ mood.id | escape }}-title">{{ mood.title }}</h2>
          <button class="modal__close" aria-label="Close modal" data-micromodal-close></button>
        </header>
        <div class="mood-date">{{ mood.date | date: site.plainwhite.mood_date_full_format }}</div>
        <article class="modal__content">{{ mood.content }}</article>
      </div>
    </div>
  </div>
  {% endfor %}
</div>