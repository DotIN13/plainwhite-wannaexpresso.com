<!DOCTYPE html><html lang="zh"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta name="google-site-verification" content="zrVlHARQzSGPX8n0jKJdP_fCO0AvtLXxoPmYkJh-oXw"/><meta name="description" content="Act local, think global with DotIN13!"><meta name="keywords" content="Linux and fstab"><meta name="theme-color" content="#ff94c2"><meta lang="zh"><link rel="manifest" href="/manifest.json"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicon/apple-touch-icon.png?v=2bA3g2vyYK"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicon/favicon-32x32.png?v=2bA3g2vyYK"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicon/favicon-16x16.png?v=2bA3g2vyYK"><link rel="mask-icon" href="/assets/img/favicon/safari-pinned-tab.svg?v=2bA3g2vyYK" color="#dc2267"><link rel="shortcut icon" href="/assets/img/favicon/favicon.ico?v=2bA3g2vyYK"><meta name="msapplication-TileColor" content="#ffc40d"><meta name="msapplication-config" content="/assets/img/favicon/browserconfig.xml?v=2bA3g2vyYK"><meta property="og:title" content="Linux开机自动挂载分区 - DOTIN13'S BLOG"><meta property="og:type" content="article"><meta property="og:description" content="开机自动挂载 在给系统新增了磁盘以后，如果重启系统我们会发现找不到存储；但是使用fdisk -l可以看到存储空间，说明存储还在。这是因为关机后，挂载已经自动卸载掉了。我们当然可以手动再次将其挂载，但如果每次重启都需要这样手动操作会很不方便。因此我们可以利用自动挂载，这样系统每次开机的时候就可以自动将磁盘挂载上去了。 修改/etc/fstab文件 用vim或者nano打开/etc/fstab..."><meta property="article:published_time" content="2020-02-23T14:25:00Z"><meta property="article:author" content="DotIN13"><meta property="article:tag" content="Linux"><meta property="article:tag" content="fstab"><meta property="og:image" content="https://www.wannaexpresso.com/assets/img/orange.webp"><meta property="og:url" content="https://www.wannaexpresso.com/2020/02/23/linux-auto-mount/"><meta property="og:site_name" content="DOTIN13'S BLOG"><link rel="canonical" href="https://www.wannaexpresso.com/2020/02/23/linux-auto-mount/"><script src="/assets/public/application-bundle.js"></script><link rel="stylesheet" href="/assets/public/application.css"><script src="/assets/public/posts-bundle.js"></script><title>Linux开机自动挂载分区 - DOTIN13'S BLOG</title></head><body><main class="container"><section class="about"><div class="about-header"><div class="about-title"><a href="/" id="avatar" data-caption="DotIN13" data-webpack="true" data-path="/assets/img/orange.webp"></a><h2 id="title"><a href="/">DotIN13</a></h2></div><p class="tagline">LACKAWANNA<br>EXPRESSO</p></div><div class="buttons"><a href="/en-us/" class="language-selection button icon-translate" aria-label="Change locale to English."></a><a href="/feed.xml" class="feed button icon-rss_feed" aria-label="RSS Feed"></a><input type="checkbox" class="dark-mode-toggle" aria-label="dark-mode-switch"><a href="#" aria-label="Click to toggle darkmode." class="button"><span class="icon-moon"></span><span class="icon-sun"></span></a><a href="#" id="pwa-install" class="install button icon-install disabled" aria-label="Install as Web Application"><span>Install</span></a></div><ul class="social condensed"><li><a target="_blank" rel="noreferrer" href="https://github.com/DotIN13" aria-label="GitHub Social Link"><span class="fa-stack fa-2x"><i class="fas icon-circle fa-stack-2x"></i><i class="fab icon-github fa-stack-1x fa-inverse"></i></span></a></li><li><a target="_blank" rel="noreferrer" href="https://www.facebook.com/peter.zhang.1466" aria-label="Facebook Social Link"><span class="fa-stack fa-2x"><i class="fas icon-circle fa-stack-2x"></i><i class="fab icon-facebook fa-stack-1x fa-inverse"></i></span></a></li><li><a target="_blank" rel="noreferrer" href="https://twitter.com/DotIN13" aria-label="Twitter Social Link"><span class="fa-stack fa-2x"><i class="fas icon-circle fa-stack-2x"></i><i class="fab icon-twitter fa-stack-1x fa-inverse"></i></span></a></li><li><a target="_blank" rel="noreferrer" href="https://space.bilibili.com/4471331" aria-label="Bilibili Social Link"><span class="fa-stack fa-2x"><i class="fas icon-circle fa-stack-2x"></i><i class="icon-bilibili fa-stack-1x fa-inverse"></i></span></a></li></ul><nav class="navigation condensed"><ul><li><a href="/about">About</a></li><li><a href="/archive">Archive</a></li></ul></nav><section class="about-footer condensed"><div><a href="https://icp.gov.moe" rel="noreferrer" target="_blank">Moe ICP </a><a href="https://icp.gov.moe/?keyword=20201620" target="_blank" rel="noreferrer">20201620</a></div><div><a rel="noreferrer" href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank">CC-BY-SA 4.0</a></div></section></section><section class="content"><div class="post-container"><a class="post-link" href="/2020/02/23/linux-auto-mount/"><h2 class="post-title">Linux开机自动挂载分区</h2><h3 class="post-subtitle">Automatically Mount Disks on Linux Start-up</h3></a><div class="post-meta"><div class="post-categories"><a class="button" href="/archive/?tag=Linux" title="Linux">Linux</a><a class="button" href="/archive/?tag=fstab" title="fstab">fstab</a></div><div class="post-misc"><div class="post-date"><i class="icon-calendar"></i>Feb 23, 2020</div></div></div><div class="post"><h2 id="开机自动挂载"><a href="#开机自动挂载">#</a> 开机自动挂载 </h2><p>在给系统新增了磁盘以后，如果重启系统我们会发现找不到存储；但是使用<code>fdisk -l</code>可以看到存储空间，说明存储还在。这是因为关机后，挂载已经自动卸载掉了。我们当然可以手动再次将其挂载，但如果每次重启都需要这样手动操作会很不方便。因此我们可以利用自动挂载，这样系统每次开机的时候就可以自动将磁盘挂载上去了。</p><h3> 修改<code>/etc/fstab</code>文件 </h3><p>用<code>vim</code>或者<code>nano</code>打开<code>/etc/fstab</code>可以看到如下内容：</p><figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># /etc/fstab: static file system information.</span>
<span class="c">#</span>
<span class="c"># Use 'blkid' to print the universally unique identifier for a device; this may</span>
<span class="c"># be used with UUID= as a more robust way to name devices that works even if</span>
<span class="c"># disks are added and removed. See fstab(5).</span>
<span class="c">#</span>
<span class="c"># &lt;file system&gt;             &lt;mount point&gt;  &lt;type&gt;  &lt;options&gt;  &lt;dump&gt;  &lt;pass&gt;</span>
<span class="nv">UUID</span><span class="o">=</span>a81dd710-993c-4e3f-901a-e6bf2cdbf7dd /              ext4    defaults,noatime,discard 0 1
<span class="nv">UUID</span><span class="o">=</span>DA18-EBFA                            /boot/efi      vfat    <span class="nb">umask</span><span class="o">=</span>0077 0 2
tmpfs                                     /tmp           tmpfs   defaults,noatime,mode<span class="o">=</span>1777 0 0
<span class="nv">UUID</span><span class="o">=</span>000CD54D00014CB1                     /mnt/Ogrema    ntfs    defaults         0 0
<span class="nv">UUID</span><span class="o">=</span>8EF257AE5A2BABB0                     /mnt/Karazhan  ntfs    defaults         0 0
<span class="nv">UUID</span><span class="o">=</span>20E5F700538CA3AB                     /mnt/Xandar    ntfs    defaults         0 0</code></pre></figure><p>可以很明显的看到文件有6列。<br> 第1列是设备名或者卷标；<br> 第2列是挂载点（也就是挂载目录）；<br> 第3列是所要挂载设备的文件系统或者文件系统类型；<br> 第4列是挂载选项，通常使用<code>defaults</code>就可以；<br> 第5列设置是否使用dump备份，置0为不备份，置1，2为备份，但2的备份重要性比1小；<br> 第6列设置是否开机的时候使用<code>fsck</code>检验所挂载的磁盘，置0为不检验，置1，2为检验，但置2盘比置1的盘晚检验。</p><h4 id="本文示例"><a href="#本文示例">#</a> 本文示例 </h4><p>将<code>/dev/sda5</code>挂载到<code>/mnt/Karazhan</code></p><p>首先使用<code>sudo blkid /dev/sda5</code>命令查看设备UUID，获得输出如下：</p><figure class="highlight"><pre><code class="language-shell" data-lang="shell">/dev/sda5: <span class="nv">LABEL</span><span class="o">=</span><span class="s2">"Karazhan"</span> <span class="nv">BLOCK_SIZE</span><span class="o">=</span><span class="s2">"512"</span> <span class="nv">UUID</span><span class="o">=</span><span class="s2">"8EF257AE5A2BABB0"</span> <span class="nv">TYPE</span><span class="o">=</span><span class="s2">"ntfs"</span> <span class="nv">PARTLABEL</span><span class="o">=</span><span class="s2">"Basic data partition"</span> <span class="nv">PARTUUID</span><span class="o">=</span><span class="s2">"ce11e894-ece4-4c1e-a358-e85789be0b58"</span></code></pre></figure><p>得知<code>/dev/sda5</code>的UUID为8EF257AE5A2BABB0，利用nano/vim/gedit编辑<code>/etc/fstab</code>，在文件最后添加如下代码：</p><figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="nv">UUID</span><span class="o">=</span>8EF257AE5A2BABB0   /mnt/Karazhan  ntfs    defaults    0 0
<span class="c"># 或者也可以使用PARTUUID</span>
<span class="nv">PARTUUID</span><span class="o">=</span><span class="s2">"ce11e894-ece4-4c1e-a358-e85789be0b58UUID=8EF257AE5A2BABB0"</span>   /mnt/Karazhan  ntfs    defaults    0 0</code></pre></figure><p>将上面的命令添加进<code>fstab</code>后，为了避免可能的错误，我们可以使用<code>sudo mount -a</code>命令来检验编辑的内容是否有错。执行<code>sudo mount -a</code>命令后，用<code>df -h</code>命令查看会发现磁盘已经挂载成功，说明输入没有错误。下次重启的时候系统就可以自动进行挂载了。</p><figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">[</span>dotin13@Manhattan ~]<span class="nv">$ </span><span class="nb">df</span> <span class="nt">-h</span>
Filesystem      Size  Used Avail Use% Mounted on
dev             7.8G     0  7.8G   0% /dev
run             7.8G  1.7M  7.8G   1% /run
/dev/sdb1        39G   22G   15G  60% /
tmpfs           7.8G   85M  7.7G   2% /dev/shm
tmpfs           7.8G     0  7.8G   0% /sys/fs/cgroup
tmpfs           7.8G  105M  7.7G   2% /tmp
/dev/sda5       211G  180G   31G  86% /mnt/Karazhan
/dev/sda3       200M   36M  164M  18% /boot/efi
/dev/sdb3        58G   29G   27G  53% /home
tmpfs           1.6G   20K  1.6G   1% /run/user/120
tmpfs           1.6G   68K  1.6G   1% /run/user/1000</code></pre></figure><h4 id="注意"><a href="#注意">#</a> 注意 </h4><ol><li>根目录必须优先于其他挂载点</li><li>挂载点必须为已经存在的目录</li><li>卸载时必须保证当前磁盘没有发生读写操作</li><li>不建议使用/dev/sda5的形式代替UUID，因为多硬盘的设备中，每次开机时设备号可能不同，导致无法开机</li></ol><p>参考：<a href="https://askubuntu.com/questions/711016/slow-boot-a-start-job-is-running-for-dev-disk-by">显示“A start job is running for /dev/sdx”，无法开机</a>。<br> 原载：<a href="https://blog.csdn.net/buxiaoxindasuile/article/details/49612867">CSDN Blog</a>，有修改。</p></div><ul class="post-pager"><li class="pager--next"><a class="button" href="/2020/02/23/manjaro-qq-wechat/" data-toggle="tooltip" data-placement="top" title="在Manjaro中优雅地使用QQ与Wechat"> NEXT<br><span>在Manjaro中优雅地使用QQ与Wechat</span></a></li><li class="pager--prev"><a class="button" href="/2020/02/23/manjaro-v2ray/" data-toggle="tooltip" data-placement="top" title="在Linux/Manjaro中使用V2Ray"> PREV<br><span>在Linux/Manjaro中使用V2Ray</span></a></li></ul><div id="vcomments"></div></div></section><footer class="about condensed"><ul class="social condensed"><li><a target="_blank" rel="noreferrer" href="https://github.com/DotIN13" aria-label="GitHub Social Link"><span class="fa-stack fa-2x"><i class="fas icon-circle fa-stack-2x"></i><i class="fab icon-github fa-stack-1x fa-inverse"></i></span></a></li><li><a target="_blank" rel="noreferrer" href="https://www.facebook.com/peter.zhang.1466" aria-label="Facebook Social Link"><span class="fa-stack fa-2x"><i class="fas icon-circle fa-stack-2x"></i><i class="fab icon-facebook fa-stack-1x fa-inverse"></i></span></a></li><li><a target="_blank" rel="noreferrer" href="https://twitter.com/DotIN13" aria-label="Twitter Social Link"><span class="fa-stack fa-2x"><i class="fas icon-circle fa-stack-2x"></i><i class="fab icon-twitter fa-stack-1x fa-inverse"></i></span></a></li><li><a target="_blank" rel="noreferrer" href="https://space.bilibili.com/4471331" aria-label="Bilibili Social Link"><span class="fa-stack fa-2x"><i class="fas icon-circle fa-stack-2x"></i><i class="icon-bilibili fa-stack-1x fa-inverse"></i></span></a></li></ul><nav class="navigation condensed"><ul><li><a href="/about">About</a></li><li><a href="/archive">Archive</a></li></ul></nav><section class="about-footer condensed"><div><a href="https://icp.gov.moe" rel="noreferrer" target="_blank">Moe ICP </a><a href="https://icp.gov.moe/?keyword=20201620" target="_blank" rel="noreferrer">20201620</a></div><div><a rel="noreferrer" href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank">CC-BY-SA 4.0</a></div></section></footer></main><script async src="https://www.googletagmanager.com/gtag/js?id=UA-159368053-1"></script><script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());

        gtag('config', 'UA-159368053-1');
    </script></body></html>