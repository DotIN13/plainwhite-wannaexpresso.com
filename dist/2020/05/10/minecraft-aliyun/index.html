<!DOCTYPE html><html lang="zh"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta name="google-site-verification" content="zrVlHARQzSGPX8n0jKJdP_fCO0AvtLXxoPmYkJh-oXw"/><meta name="description" content="Act local, think global with DotIN13!"><meta name="keywords" content="Linux, Game, Minecraft, and Alibaba Cloud"><meta name="theme-color" content="#ff94c2"><meta lang="zh"><link rel="manifest" href="/manifest.json"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicon/apple-touch-icon.png?v=2bA3g2vyYK"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicon/favicon-32x32.png?v=2bA3g2vyYK"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicon/favicon-16x16.png?v=2bA3g2vyYK"><link rel="mask-icon" href="/assets/img/favicon/safari-pinned-tab.svg?v=2bA3g2vyYK" color="#dc2267"><link rel="shortcut icon" href="/assets/img/favicon/favicon.ico?v=2bA3g2vyYK"><meta name="msapplication-TileColor" content="#ffc40d"><meta name="msapplication-config" content="/assets/img/favicon/browserconfig.xml?v=2bA3g2vyYK"><meta property="og:title" content="在阿里云ECS上搭建Minecraft原版服务器 - DOTIN13'S BLOG"><meta property="og:type" content="article"><meta property="og:description" content="阿里云ECS 由于新冠疫情，阿里云推出了“在家实践”计划，高校学生、教师可以免费领取6个月的云服务器。 新冠肺炎疫情防控持续推进，为全力配合教育部延期开学，高校师生在家上课共同抗击疫情，阿里云弹性计算联合开发者社区、阿里云大学紧急上线高校“在家实践”计划，向全国高校学生、教师免费提供2.68亿小时云服务器ECS算力，及多样化在线课程等资源。 ECS（弹性计算服务）是什么呢，其实..."><meta property="article:published_time" content="2020-05-10T00:00:00Z"><meta property="article:author" content="DotIN13"><meta property="article:tag" content="Linux"><meta property="article:tag" content="Game"><meta property="article:tag" content="Minecraft"><meta property="article:tag" content="Alibaba Cloud"><meta property="og:image" content="https://www.wannaexpresso.com/assets/img/orange.webp"><meta property="og:url" content="https://www.wannaexpresso.com/2020/05/10/minecraft-aliyun/"><meta property="og:site_name" content="DOTIN13'S BLOG"><link rel="canonical" href="https://www.wannaexpresso.com/2020/05/10/minecraft-aliyun/"><script src="/assets/public/application-bundle.js"></script><link rel="stylesheet" href="/assets/public/application.css"><script src="/assets/public/posts-bundle.js"></script><title>在阿里云ECS上搭建Minecraft原版服务器 - DOTIN13'S BLOG</title></head><body><main class="container"><section class="about"><div class="about-header"><div class="about-title"><a href="/" id="avatar" data-caption="DotIN13" data-webpack="true" data-path="/assets/img/orange.webp"></a><h2 id="title"><a href="/">DotIN13</a></h2></div><p class="tagline">LACKAWANNA<br>EXPRESSO</p></div><div class="buttons"><a href="/en-us/" class="language-selection button icon-translate" aria-label="Change locale to English."></a><a href="/feed.xml" class="feed button icon-rss_feed" aria-label="RSS Feed"></a><input type="checkbox" class="dark-mode-toggle" aria-label="dark-mode-switch"><a href="#" aria-label="Click to toggle darkmode." class="button"><span class="icon-moon"></span><span class="icon-sun"></span></a><a href="#" id="pwa-install" class="install button icon-install disabled" aria-label="Install as Web Application"><span>Install</span></a></div><ul class="social condensed"><li><a target="_blank" rel="noreferrer" href="https://github.com/DotIN13" aria-label="GitHub Social Link"><span class="fa-stack fa-2x"><i class="fas icon-circle fa-stack-2x"></i><i class="fab icon-github fa-stack-1x fa-inverse"></i></span></a></li><li><a target="_blank" rel="noreferrer" href="https://www.facebook.com/peter.zhang.1466" aria-label="Facebook Social Link"><span class="fa-stack fa-2x"><i class="fas icon-circle fa-stack-2x"></i><i class="fab icon-facebook fa-stack-1x fa-inverse"></i></span></a></li><li><a target="_blank" rel="noreferrer" href="https://twitter.com/DotIN13" aria-label="Twitter Social Link"><span class="fa-stack fa-2x"><i class="fas icon-circle fa-stack-2x"></i><i class="fab icon-twitter fa-stack-1x fa-inverse"></i></span></a></li><li><a target="_blank" rel="noreferrer" href="https://space.bilibili.com/4471331" aria-label="Bilibili Social Link"><span class="fa-stack fa-2x"><i class="fas icon-circle fa-stack-2x"></i><i class="icon-bilibili fa-stack-1x fa-inverse"></i></span></a></li></ul><nav class="navigation condensed"><ul><li><a href="/about">About</a></li><li><a href="/archive">Archive</a></li></ul></nav><section class="about-footer condensed"><div><a href="https://icp.gov.moe" rel="noreferrer" target="_blank">Moe ICP </a><a href="https://icp.gov.moe/?keyword=20201620" target="_blank" rel="noreferrer">20201620</a></div><div><a rel="noreferrer" href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank">CC-BY-SA 4.0</a></div></section></section><section class="content"><div class="post-container"><a class="post-link" href="/2020/05/10/minecraft-aliyun/"><h2 class="post-title">在阿里云ECS上搭建Minecraft原版服务器</h2><h3 class="post-subtitle">Vanilla Minecraft Server on Alibaba Cloud ECS</h3></a><div class="post-meta"><div class="post-categories"><a class="button" href="/archive/?tag=Linux" title="Linux">Linux</a><a class="button" href="/archive/?tag=Game" title="Game">Game</a><a class="button" href="/archive/?tag=Minecraft" title="Minecraft">Minecraft</a><a class="button" href="/archive/?tag=Alibaba+Cloud" title="Alibaba Cloud">Alibaba Cloud</a></div><div class="post-misc"><div class="post-date"><i class="icon-calendar"></i>May 10, 2020</div></div></div><div class="post"><h2 id="阿里云ecs"><a href="#阿里云ecs">#</a> 阿里云ECS </h2><p>由于新冠疫情，阿里云推出了<a href="https://developer.aliyun.com/adc/college/" target="_blank" rel="nofollow noopener noreferrer">“在家实践”计划</a>，高校学生、教师可以免费领取6个月的云服务器。</p><blockquote><p>新冠肺炎疫情防控持续推进，为全力配合教育部延期开学，高校师生在家上课共同抗击疫情，阿里云弹性计算联合开发者社区、阿里云大学紧急上线高校“在家实践”计划，向全国高校学生、教师免费提供2.68亿小时云服务器ECS算力，及多样化在线课程等资源。</p></blockquote><p><a href="https://www.alibabacloud.com/help/zh/doc-detail/25367.htm" target="_blank" rel="nofollow noopener noreferrer">ECS（弹性计算服务）</a>是什么呢，其实它就是一种虚拟服务器，与VPS（Virtual Private Server）的最大区别就在于它并非基于一台专有服务器，因此，只要你有钱（雾），就可以随时升级各项配置来满足你不断改变的即时性能需求。</p><p>羊毛不褥白不褥，我在了解之后立马申请到了一台ECS。性能还算不错，Intel Xeon×2 + 4GB RAM，不过，学习是不可能学习的，只有打打MC才能维持得了生活这样子。于是，这台服务器就顺理成章地被我改造成了一台MC原版服务器。</p><h2 id="配置实例安全组"><a href="#配置实例安全组">#</a> 配置实例安全组 </h2><p>我将Minecraft服务器直接架设在了默认的25565端口，因此首先需要在阿里云的安全组中开启25565端口TCP入站的规则。首先打开实例页面，进入实例当前安全组进行设置，如下图。</p><div class="post-img"><a href="/assets/img/in-post/post-minecraft-aliyun/security-group.png" data-fancybox="gallery" data-caption="Security Group" data-path="post-minecraft-aliyun/security-group.png" data-webpack="true"></a><em>Security Group</em></div><p>然后在访问规则的入规则下点击手动创建。</p><div class="post-img"><a href="/assets/img/in-post/post-minecraft-aliyun/manual.png" data-fancybox="gallery" data-caption="Create Manually" data-path="post-minecraft-aliyun/manual.png" data-webpack="true"></a><em>Create Manually</em></div><p>填入Minecraft端口并保存。</p><div class="post-img"><a href="/assets/img/in-post/post-minecraft-aliyun/value.png" data-fancybox="gallery" data-caption="Set Rule" data-path="post-minecraft-aliyun/value.png" data-webpack="true"></a><em>Set Rule</em></div><h2 id="配置服务端"><a href="#配置服务端">#</a> 配置服务端 </h2><p>系统上我选择了Debian 9.9 x64。</p><h3 id="下载服务端"><a href="#下载服务端">#</a> 下载服务端 </h3><p>首先，在<a href="https://www.minecraft.net/zh-hans/download/server/" target="_blank" rel="nofollow noopener noreferrer">Minecraft官网找到服务端下载地址</a>。</p><div class="post-img"><a href="/assets/img/in-post/post-minecraft-aliyun/download-server-jar.png" data-fancybox="gallery" data-caption="Acquire Server Download Link" data-path="post-minecraft-aliyun/download-server-jar.png" data-webpack="true"></a><em>Acquire Server Download Link</em></div><p>然后，通过SSH登陆你的服务器，用以下命令创建<code class="language-plaintext highlighter-rouge">/srv/minecraft</code>文件夹，并下载服务端文件。</p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir</span> /srv/minecraft <span class="c"># 创建minecraft文件夹</span>
<span class="nb">cd</span> /srv/minecraft <span class="c"># 移动到上述文件夹</span>
<span class="c"># 使用wget下载服务端，地址请用你刚才复制的地址，这里的示例是1.15.2的服务端</span>
wget https://launcher.mojang.com/v1/objects/bb2b6b1aefcd70dfd1892149ac3a215f6c636b07/server.jar
</code></pre></div></div><h3 id="安装java与screen"><a href="#安装java与screen">#</a> 安装Java与screen </h3><p>首先更新软件源与系统。</p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt update <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>apt upgrade
</code></pre></div></div><p>然后安装OpenJDK 8与screen。OpenJDK是Minecraft的必须运行环境，而screen是linux的会话管理软件，可以保证会话在SSH断开后仍然保持运行。</p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>openjdk-8-jre-headless screen
</code></pre></div></div><blockquote><p><strong>备注</strong>：Minecraft 1.13及以上只兼容OpenJDK 8，如果你的服务器上有OpenJDK 7的残余，请用<code class="language-plaintext highlighter-rouge">sudo apt remove openjdk-7-\*</code>卸载。</p></blockquote><h3 id="初次运行"><a href="#初次运行">#</a> 初次运行 </h3><p>用以下命令初次运行服务端。</p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>java <span class="nt">-Xmx2048M</span> <span class="nt">-Xms3572M</span> <span class="nt">-jar</span> server.jar nogui
<span class="c"># -Xmx 最小内存 -Xms 最大内存 nogui 以命令行形式运行</span>
</code></pre></div></div><p>初次运行会很快退出，要求你同意EULA协议。</p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nano eula.txt <span class="c"># 用nano编辑器打开协议文件</span>
</code></pre></div></div><p>设置<code class="language-plaintext highlighter-rouge">eula=true</code>，表示你同意EULA协议：</p><div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#By changing the setting below to TRUE you are indicating your agreement to our EULA (https://account.mojang.com/documents/minecraft_eula).</span>
<span class="c1">#Fri May 08 12:30:29 CST 2020</span>
<span class="s">eula=true</span>
</code></pre></div></div><h3 id="设置bash脚本"><a href="#设置bash脚本">#</a> 设置bash脚本 </h3><p>你肯定不想每次开服都输入上面这串代码，这时就可以利用脚本来完成开服工作。</p><p>在当前文件夹新建<code class="language-plaintext highlighter-rouge">run.sh</code>脚本文件。</p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">touch </span>run.sh <span class="c"># 新建run.sh文件</span>
nano run.sh <span class="c"># 编辑run.sh文件</span>
</code></pre></div></div><p>修改run.sh内容为如下：</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/sh</span>

java <span class="nt">-Xms2048M</span> <span class="nt">-Xmx3572M</span> <span class="nt">-jar</span> server.jar nogui
</code></pre></div></div><p>这里我使用了2048M最小内存与3572M最大内存，可以根据你的喜好增减。</p><p>将run.sh设置为可执行：</p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">chmod</span> +x /home/minecraft/run.sh
</code></pre></div></div><p>然后使用screen新建一个会话并启动Minecraft服务器。</p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>screen ./run.sh <span class="c"># 在一个新的会话中运行bash脚本</span>
<span class="c"># 或者</span>
screen <span class="nt">-S</span> <span class="s2">"Minecraft"</span> <span class="c"># 建立一个新的名为“Minecraft”的会话</span>
./run.sh <span class="c"># 运行脚本</span>
</code></pre></div></div><p>此时你的服务器就会开始运行，当你看到<code class="language-plaintext highlighter-rouge">done</code>时，意味着服务器启动已经完成。</p><p>此时你可以关闭服务器，修改同目录下的<code class="language-plaintext highlighter-rouge">server.properties</code>来关闭正版验证、配置地图种子、修改游戏难度、打开白名单。</p><div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># 主要的配置如下</span>
<span class="s">white-list=true</span> <span class="c1"># 开启白名单</span>
<span class="s">difficulty=easy</span> <span class="c1"># 设置难度</span>
<span class="s">max-players=20</span> <span class="c1"># 设置最大人数</span>
<span class="s">online-mode=false</span> <span class="c1"># 关闭正版验证</span>
</code></pre></div></div><p>更多设置请见<a href="https://minecraft-zh.gamepedia.com/index.php?title=Server.properties&amp;variant=zh-cn" target="_blank" rel="nofollow noopener noreferrer">Minecraft Wiki</a>。</p><h3 id="添加白名单"><a href="#添加白名单">#</a> 添加白名单 </h3><p>在启动服务器后，可以利用<code class="language-plaintext highlighter-rouge">whitelist add Name</code>命令在后台添加白名单，但有时会出现添加了白名单也无法加入的情况，可能是大小写或者UUID对不上。这时可以手动修改<code class="language-plaintext highlighter-rouge">whitelist.json</code>。</p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nano whitelist.json <span class="c"># 用nano编辑whitelist.json</span>
</code></pre></div></div><p>修改json中的信息，uuid修改为后台登陆失败信息中的id，name修改为玩家的名字。</p><div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">#</span><span class="w"> </span><span class="err">JSON</span><span class="w"> </span><span class="err">示例</span><span class="w">
</span><span class="p">[</span><span class="w">  
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"uuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ba5d0d26-54b5-3e43-a4de-xxxxxxxxxxxx"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GHModius"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"uuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55b632d1-44f6-3116-asdd-xxxxxxxxxxxx"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ParkMoonJ"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div><p>后台刷新白名单：</p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>whitelist reload
</code></pre></div></div><p>这样就能够正常登陆了。</p><h2 id="总结"><a href="#总结">#</a> 总结 </h2><p>原版服务器的搭建还是非常容易的，注意不要贪玩，记得写期中作业哦！</p></div><ul class="post-pager"><li class="pager--next"><a class="button" href="/2020/05/14/apple-pie/" data-toggle="tooltip" data-placement="top" title="简单制作手抓饼苹果派"> NEXT<br><span>简单制作手抓饼苹果派</span></a></li><li class="pager--prev"><a class="button" href="/en-us/2020/05/01/stop-propagation/" data-toggle="tooltip" data-placement="top" title="Onclick Not Working after Switching Pages? stopPropagation Saves the Day!"> PREV<br><span>Onclick Not Working after Switching Pages? stopPropagation Saves the Day!</span></a></li></ul><div id="vcomments"></div></div></section><footer class="about condensed"><ul class="social condensed"><li><a target="_blank" rel="noreferrer" href="https://github.com/DotIN13" aria-label="GitHub Social Link"><span class="fa-stack fa-2x"><i class="fas icon-circle fa-stack-2x"></i><i class="fab icon-github fa-stack-1x fa-inverse"></i></span></a></li><li><a target="_blank" rel="noreferrer" href="https://www.facebook.com/peter.zhang.1466" aria-label="Facebook Social Link"><span class="fa-stack fa-2x"><i class="fas icon-circle fa-stack-2x"></i><i class="fab icon-facebook fa-stack-1x fa-inverse"></i></span></a></li><li><a target="_blank" rel="noreferrer" href="https://twitter.com/DotIN13" aria-label="Twitter Social Link"><span class="fa-stack fa-2x"><i class="fas icon-circle fa-stack-2x"></i><i class="fab icon-twitter fa-stack-1x fa-inverse"></i></span></a></li><li><a target="_blank" rel="noreferrer" href="https://space.bilibili.com/4471331" aria-label="Bilibili Social Link"><span class="fa-stack fa-2x"><i class="fas icon-circle fa-stack-2x"></i><i class="icon-bilibili fa-stack-1x fa-inverse"></i></span></a></li></ul><nav class="navigation condensed"><ul><li><a href="/about">About</a></li><li><a href="/archive">Archive</a></li></ul></nav><section class="about-footer condensed"><div><a href="https://icp.gov.moe" rel="noreferrer" target="_blank">Moe ICP </a><a href="https://icp.gov.moe/?keyword=20201620" target="_blank" rel="noreferrer">20201620</a></div><div><a rel="noreferrer" href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank">CC-BY-SA 4.0</a></div></section></footer></main><script async src="https://www.googletagmanager.com/gtag/js?id=UA-159368053-1"></script><script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());

        gtag('config', 'UA-159368053-1');
    </script></body></html>