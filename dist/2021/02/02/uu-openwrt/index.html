<!DOCTYPE html><html lang="zh"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta name="google-site-verification" content="zrVlHARQzSGPX8n0jKJdP_fCO0AvtLXxoPmYkJh-oXw"/><meta name="description" content="Act local, think global with DotIN13!"><meta name="keywords" content="UU Router and OpenWrt"><meta name="theme-color" content="#ff94c2"><meta lang="zh"><link rel="manifest" href="/manifest.json"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicon/apple-touch-icon.png?v=2bA3g2vyYK"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicon/favicon-32x32.png?v=2bA3g2vyYK"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicon/favicon-16x16.png?v=2bA3g2vyYK"><link rel="mask-icon" href="/assets/img/favicon/safari-pinned-tab.svg?v=2bA3g2vyYK" color="#dc2267"><link rel="shortcut icon" href="/assets/img/favicon/favicon.ico?v=2bA3g2vyYK"><meta name="msapplication-TileColor" content="#ffc40d"><meta name="msapplication-config" content="/assets/img/favicon/browserconfig.xml?v=2bA3g2vyYK"><meta property="og:title" content="如何优雅地在OpenWrt使用UU加速器 - DOTIN13'S BLOG"><meta property="og:type" content="article"><meta property="og:description" content="UU加速器OpenWrt插件 家中购买酷安人均的斐讯K2P已有多时，原先刷入了OpenWrt系统用于加速上网，后来不怎的稳定，于是作罢，就仅仅做个拨号+AP。 后来添置Switch，意欲安装UU加速器插件为舞力全开作嫁衣，却无奈网易官方只支持梅林、华硕固件，便又作罢。 没想到，前几日网上冲浪，竟发现UU加速器已经有了OpenWrt的插件，官方教程于2020年12月26日更新。按奈不住，..."><meta property="article:published_time" content="2021-02-02T00:00:00Z"><meta property="article:author" content="DotIN13"><meta property="article:tag" content="UU Router"><meta property="article:tag" content="OpenWrt"><meta property="og:image" content="https://www.wannaexpresso.com/assets/img/orange.webp"><meta property="og:url" content="https://www.wannaexpresso.com/2021/02/02/uu-openwrt/"><meta property="og:site_name" content="DOTIN13'S BLOG"><link rel="canonical" href="https://www.wannaexpresso.com/2021/02/02/uu-openwrt/"><script src="/assets/public/application-bundle.js"></script><link rel="stylesheet" href="/assets/public/application.css"><script src="/assets/public/posts-bundle.js"></script><title>如何优雅地在OpenWrt使用UU加速器 - DOTIN13'S BLOG</title></head><body><main class="container"><section class="about"><div class="about-header"><div class="about-title"><a href="/" id="avatar" data-caption="DotIN13" data-webpack="true" data-path="/assets/img/orange.webp"></a><h2 id="title"><a href="/">DotIN13</a></h2></div><p class="tagline">LACKAWANNA<br>EXPRESSO</p></div><div class="buttons"><a href="/en-us/" class="language-selection button icon-translate" aria-label="Change locale to English."></a><a href="/feed.xml" class="feed button icon-rss_feed" aria-label="RSS Feed"></a><input type="checkbox" class="dark-mode-toggle" aria-label="dark-mode-switch"><a href="#" aria-label="Click to toggle darkmode." class="button"><span class="icon-moon"></span><span class="icon-sun"></span></a><a href="#" id="pwa-install" class="install button icon-install disabled" aria-label="Install as Web Application"><span>Install</span></a></div><ul class="social condensed"><li><a target="_blank" rel="noreferrer" href="https://github.com/DotIN13" aria-label="GitHub Social Link"><span class="fa-stack fa-2x"><i class="fas icon-circle fa-stack-2x"></i><i class="fab icon-github fa-stack-1x fa-inverse"></i></span></a></li><li><a target="_blank" rel="noreferrer" href="https://www.facebook.com/peter.zhang.1466" aria-label="Facebook Social Link"><span class="fa-stack fa-2x"><i class="fas icon-circle fa-stack-2x"></i><i class="fab icon-facebook fa-stack-1x fa-inverse"></i></span></a></li><li><a target="_blank" rel="noreferrer" href="https://twitter.com/DotIN13" aria-label="Twitter Social Link"><span class="fa-stack fa-2x"><i class="fas icon-circle fa-stack-2x"></i><i class="fab icon-twitter fa-stack-1x fa-inverse"></i></span></a></li><li><a target="_blank" rel="noreferrer" href="https://space.bilibili.com/4471331" aria-label="Bilibili Social Link"><span class="fa-stack fa-2x"><i class="fas icon-circle fa-stack-2x"></i><i class="icon-bilibili fa-stack-1x fa-inverse"></i></span></a></li></ul><nav class="navigation condensed"><ul><li><a href="/about">About</a></li><li><a href="/archive">Archive</a></li></ul></nav><section class="about-footer condensed"><div><a href="https://icp.gov.moe" rel="noreferrer" target="_blank">Moe ICP </a><a href="https://icp.gov.moe/?keyword=20201620" target="_blank" rel="noreferrer">20201620</a></div><div><a rel="noreferrer" href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank">CC-BY-SA 4.0</a></div></section></section><section class="content"><div class="post-container"><a class="post-link" href="/2021/02/02/uu-openwrt/"><h2 class="post-title">如何优雅地在OpenWrt使用UU加速器</h2><h3 class="post-subtitle">Using UU Router with OpenWrt</h3></a><div class="post-meta"><div class="post-categories"><a class="button" href="/archive/?tag=UU+Router" title="UU Router">UU Router</a><a class="button" href="/archive/?tag=OpenWrt" title="OpenWrt">OpenWrt</a></div><div class="post-misc"><div class="post-date"><i class="icon-calendar"></i>Feb 2, 2021</div></div></div><div class="post"><h2 id="uu加速器openwrt插件"><a href="#uu加速器openwrt插件">#</a> UU加速器OpenWrt插件 </h2><p>家中购买酷安人均的斐讯K2P已有多时，原先刷入了OpenWrt系统用于加速上网，后来不怎的稳定，于是作罢，就仅仅做个拨号+AP。</p><p>后来添置Switch，意欲安装UU加速器插件为舞力全开作嫁衣，却无奈网易官方只支持梅林、华硕固件，便又作罢。</p><p>没想到，前几日网上冲浪，竟发现UU加速器已经有了OpenWrt的插件，<a href="https://router.uu.163.com/app/baike/public/5f963c9304c215e129ca40e8.html" target="_blank" rel="nofollow noopener noreferrer">官方教程</a>于2020年12月26日更新。按奈不住，立马依照教程上手操作，遇到一些小挫折，却也算是山重水复疑无路，柳暗花明又一村。</p><h2 id="操作路由器"><a href="#操作路由器">#</a> 操作路由器 </h2><h3 id="连接路由器"><a href="#连接路由器">#</a> 连接路由器 </h3><p>首先自然是ssh连接路由器，由于光猫占据了<code class="language-plaintext highlighter-rouge">192.168.1.1</code>的IP地址，我家的K2P便只得屈居<code class="language-plaintext highlighter-rouge">192.168.2.1</code>了。</p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh root@192.168.2.1
<span class="c"># root是路由器管理界面登陆时的用户名</span>
<span class="c"># 192.168.2.1便是网关地址，因人而异，linux系统用ip addr命令，windows用ipconfig命令确定</span>
<span class="c"># 回车后要求输入密码，也就是路由器管理页面登陆时的密码</span>
</code></pre></div></div><h3 id="安装加速器插件"><a href="#安装加速器插件">#</a> 安装加速器插件 </h3><p>加速器插件安装相当简单，官方提供了脚本自动安装。首先，下载安装脚本到当前目录。</p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget http://uu.gdl.netease.com/uuplugin-script/202010221713/install.sh <span class="nt">-O</span> install.sh
</code></pre></div></div><p>然后直接运行脚本。</p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/bin/sh install.sh openwrt <span class="si">$(</span><span class="nb">uname</span> <span class="nt">-m</span><span class="si">)</span>
<span class="c"># Output:</span>
<span class="c"># sn=xx:xx:xx:xx</span>
</code></pre></div></div><h3 id="安装kmod-tun"><a href="#安装kmod-tun">#</a> 安装kmod-tun </h3><h4 id="opkg换源"><a href="#opkg换源">#</a> Opkg换源 </h4><p>首先更新包管理器目录。我的OpenWrt是20.4.8的预览版本，使用Snapshots包，在用<code class="language-plaintext highlighter-rouge">opkg update</code>命令更新包列表时非常慢，因为官方源在国外。</p><p>转了一圈却发现<a href="https://mirrors.tuna.tsinghua.edu.cn/openwrt/snapshots/targets/" target="_blank" rel="nofollow noopener noreferrer">清华的Snapshots源</a>404错误，<a href="https://mirror.sjtu.edu.cn/openwrt/snapshots/" target="_blank" rel="nofollow noopener noreferrer">交大源</a>没有同步Snapshots包，<a href="http://mirrors.ustc.edu.cn/openwrt/snapshots/targets/" target="_blank" rel="nofollow noopener noreferrer">中科大的镜像网站</a>居然没有自动HTTPS，导致无法打开，手动把地址改成HTTPS之后总算打开了。</p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 方法一，一条命令换源</span>
<span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'s_downloads.openwrt.org_openwrt.proxy.ustclug.org_'</span> /etc/opkg/distfeeds.conf
<span class="c"># 方法二，手动修改/etc/opkg/distfeeds.conf为如下内容</span>
src/gz openwrt_core https://openwrt.proxy.ustclug.org/snapshots/targets/ramips/mt7621/packages
src/gz openwrt_base https://openwrt.proxy.ustclug.org/snapshots/packages/mipsel_24kc/base
src/gz openwrt_luci https://openwrt.proxy.ustclug.org/snapshots/packages/mipsel_24kc/luci
src/gz openwrt_packages https://openwrt.proxy.ustclug.org/snapshots/packages/mipsel_24kc/packages
src/gz openwrt_routing https://openwrt.proxy.ustclug.org/snapshots/packages/mipsel_24kc/routing
</code></pre></div></div><p>换源后运行更新命令更新包列表。</p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>opkg update
</code></pre></div></div><h4 id="安装kmod-tun-1"><a href="#安装kmod-tun-1">#</a> 安装kmod-tun </h4><p>我的OpenWrt内核版本已经老旧，仍然在运行4.4版本的linux内核。因此运行<code class="language-plaintext highlighter-rouge">opkg install kmod-tun</code>安装kmod-tun时提示内核版本过旧。</p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Collected errors:
satisfy_dependencies_for: Cannot satisfy the following dependencies <span class="k">for </span>kmod-tun:
kernel <span class="o">(=</span> 5.4.xx.x - xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx<span class="o">)</span>
</code></pre></div></div><p>搜索OpenWrt论坛了解到，可以通过强制安装指令越过内核版本检测。</p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>opkg <span class="nb">install</span> <span class="nt">--force-depends</span> kmod-tun
</code></pre></div></div><p>成功安装kmod-tun。</p><h3 id="操作手机"><a href="#操作手机">#</a> 操作手机 </h3><p>加速仍旧在手机端控制，需要下载UU加速器主机版的手机APP。</p><div class="post-img"><a href="/assets/img/in-post/post-uu/download.png" data-fancybox="gallery" data-caption="下载链接" data-path="post-uu/download.png" data-webpack="true"></a><em>下载链接</em></div><p>通过上面的QR或者<a href="https://adl.netease.com/d/g/uu/c/uu_router?from=qr" target="_blank" rel="nofollow noopener noreferrer">下载链接</a>下载安装后，按照提示连接路由器。</p><div class="post-img"><a href="/assets/img/in-post/post-uu/img-app-screenshot-OpenWrt.jpg" data-fancybox="gallery" data-caption="进入APP连接到路由器" data-path="post-uu/img-app-screenshot-OpenWrt.jpg" data-webpack="true"></a><em>进入APP连接到路由器</em></div><p>连接之后，将Switch连接到路由器的无线网络，在APP中找到Switch，选择游戏就可以加速了。</p><p>似乎有些许不稳定，群魔乱舞2020舞至第二首便掉线，只得重连。OpenWrt的插件还亟待长期的测试，不过群魔乱舞的年卡与UU加速器的年卡也实非小数目，拟至寒假过后依着实际的体验与需求再做打算。</p></div><ul class="post-pager"><li class="pager--next"><a class="button" href="/2021/02/14/m1-macbook-experience/" data-toggle="tooltip" data-placement="top" title="M1 MacBook Air轻体验"> NEXT<br><span>M1 MacBook Air轻体验</span></a></li><li class="pager--prev"><a class="button" href="/2020/11/02/before-the-law/" data-toggle="tooltip" data-placement="top" title="法律门前"> PREV<br><span>法律门前</span></a></li></ul><div id="vcomments"></div></div></section><footer class="about condensed"><ul class="social condensed"><li><a target="_blank" rel="noreferrer" href="https://github.com/DotIN13" aria-label="GitHub Social Link"><span class="fa-stack fa-2x"><i class="fas icon-circle fa-stack-2x"></i><i class="fab icon-github fa-stack-1x fa-inverse"></i></span></a></li><li><a target="_blank" rel="noreferrer" href="https://www.facebook.com/peter.zhang.1466" aria-label="Facebook Social Link"><span class="fa-stack fa-2x"><i class="fas icon-circle fa-stack-2x"></i><i class="fab icon-facebook fa-stack-1x fa-inverse"></i></span></a></li><li><a target="_blank" rel="noreferrer" href="https://twitter.com/DotIN13" aria-label="Twitter Social Link"><span class="fa-stack fa-2x"><i class="fas icon-circle fa-stack-2x"></i><i class="fab icon-twitter fa-stack-1x fa-inverse"></i></span></a></li><li><a target="_blank" rel="noreferrer" href="https://space.bilibili.com/4471331" aria-label="Bilibili Social Link"><span class="fa-stack fa-2x"><i class="fas icon-circle fa-stack-2x"></i><i class="icon-bilibili fa-stack-1x fa-inverse"></i></span></a></li></ul><nav class="navigation condensed"><ul><li><a href="/about">About</a></li><li><a href="/archive">Archive</a></li></ul></nav><section class="about-footer condensed"><div><a href="https://icp.gov.moe" rel="noreferrer" target="_blank">Moe ICP </a><a href="https://icp.gov.moe/?keyword=20201620" target="_blank" rel="noreferrer">20201620</a></div><div><a rel="noreferrer" href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank">CC-BY-SA 4.0</a></div></section></footer></main><script async src="https://www.googletagmanager.com/gtag/js?id=UA-159368053-1"></script><script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());

        gtag('config', 'UA-159368053-1');
    </script></body></html>