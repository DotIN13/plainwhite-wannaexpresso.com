<!DOCTYPE html><html lang="zh"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta name="google-site-verification" content="zrVlHARQzSGPX8n0jKJdP_fCO0AvtLXxoPmYkJh-oXw"/><meta name="description" content="Act local, think global with DotIN13!"><meta name="keywords" content="Apple Silicon, MacBook, Minecraft, and Forge"><meta name="theme-color" content="#ff94c2"><meta lang="zh"><link rel="manifest" href="/manifest.json"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicon/apple-touch-icon.png?v=2bA3g2vyYK"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicon/favicon-32x32.png?v=2bA3g2vyYK"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicon/favicon-16x16.png?v=2bA3g2vyYK"><link rel="mask-icon" href="/assets/img/favicon/safari-pinned-tab.svg?v=2bA3g2vyYK" color="#dc2267"><link rel="shortcut icon" href="/assets/img/favicon/favicon.ico?v=2bA3g2vyYK"><meta name="msapplication-TileColor" content="#ffc40d"><meta name="msapplication-config" content="/assets/img/favicon/browserconfig.xml?v=2bA3g2vyYK"><meta property="og:title" content="在M1 Macbook上不使用Rosetta优雅地游玩Minecraft+Forge - DOTIN13'S BLOG"><meta property="og:type" content="article"><meta property="og:description" content="No Rosetta 暑假的尾巴，姐妹们说，这是最后一次大家都这么有空，能在一起玩Minecraft了。某位腐竹（不错，正是在下）听了，不免有些哽咽。 不料寒假刚开始，又有姐妹在群里喊着开服。哎，毕竟放假了，要麻醉自我的嘛，真香。 房间里2700X+GTX960的中塔已经被我嫌占地儿，扔给了废品站；Windows的i7-7200U+940MX笔电玩Minecraft又卡顿。那么就只好在..."><meta property="article:published_time" content="2021-02-20T00:00:00Z"><meta property="article:author" content="DotIN13"><meta property="article:tag" content="Apple Silicon"><meta property="article:tag" content="MacBook"><meta property="article:tag" content="Minecraft"><meta property="article:tag" content="Forge"><meta property="og:image" content="https://www.wannaexpresso.com/assets/img/orange.webp"><meta property="og:url" content="https://www.wannaexpresso.com/2021/02/20/m1-macbook-minecraft/"><meta property="og:site_name" content="DOTIN13'S BLOG"><link rel="canonical" href="https://www.wannaexpresso.com/2021/02/20/m1-macbook-minecraft/"><script src="/assets/public/application-bundle.js"></script><link rel="stylesheet" href="/assets/public/application.css"><script src="/assets/public/posts-bundle.js"></script><title>在M1 Macbook上不使用Rosetta优雅地游玩Minecraft+Forge - DOTIN13'S BLOG</title></head><body><main class="container"><section class="about"><div class="about-header"><div class="about-title"><a href="/" id="avatar" data-caption="DotIN13" data-webpack="true" data-path="/assets/img/orange.webp"></a><h2 id="title"><a href="/">DotIN13</a></h2></div><p class="tagline">LACKAWANNA<br>EXPRESSO</p></div><div class="buttons"><a href="/en-us/" class="language-selection button icon-translate" aria-label="Change locale to English."></a><a href="/feed.xml" class="feed button icon-rss_feed" aria-label="RSS Feed"></a><input type="checkbox" class="dark-mode-toggle" aria-label="dark-mode-switch"><a href="#" aria-label="Click to toggle darkmode." class="button"><span class="icon-moon"></span><span class="icon-sun"></span></a><a href="#" id="pwa-install" class="install button icon-install disabled" aria-label="Install as Web Application"><span>Install</span></a></div><ul class="social condensed"><li><a target="_blank" rel="noreferrer" href="https://github.com/DotIN13" aria-label="GitHub Social Link"><span class="fa-stack fa-2x"><i class="fas icon-circle fa-stack-2x"></i><i class="fab icon-github fa-stack-1x fa-inverse"></i></span></a></li><li><a target="_blank" rel="noreferrer" href="https://www.facebook.com/peter.zhang.1466" aria-label="Facebook Social Link"><span class="fa-stack fa-2x"><i class="fas icon-circle fa-stack-2x"></i><i class="fab icon-facebook fa-stack-1x fa-inverse"></i></span></a></li><li><a target="_blank" rel="noreferrer" href="https://twitter.com/DotIN13" aria-label="Twitter Social Link"><span class="fa-stack fa-2x"><i class="fas icon-circle fa-stack-2x"></i><i class="fab icon-twitter fa-stack-1x fa-inverse"></i></span></a></li><li><a target="_blank" rel="noreferrer" href="https://space.bilibili.com/4471331" aria-label="Bilibili Social Link"><span class="fa-stack fa-2x"><i class="fas icon-circle fa-stack-2x"></i><i class="icon-bilibili fa-stack-1x fa-inverse"></i></span></a></li></ul><nav class="navigation condensed"><ul><li><a href="/about">About</a></li><li><a href="/archive">Archive</a></li></ul></nav><section class="about-footer condensed"><div><a href="https://icp.gov.moe" rel="noreferrer" target="_blank">Moe ICP </a><a href="https://icp.gov.moe/?keyword=20201620" target="_blank" rel="noreferrer">20201620</a></div><div><a rel="noreferrer" href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank">CC-BY-SA 4.0</a></div></section></section><section class="content"><div class="post-container"><a class="post-link" href="/2021/02/20/m1-macbook-minecraft/"><h2 class="post-title">在M1 Macbook上不使用Rosetta优雅地游玩Minecraft+Forge</h2><h3 class="post-subtitle">Messing with Native Minecraft w/ Forge on M1 MacBook</h3></a><div class="post-meta"><div class="post-categories"><a class="button" href="/archive/?tag=Apple+Silicon" title="Apple Silicon">Apple Silicon</a><a class="button" href="/archive/?tag=MacBook" title="MacBook">MacBook</a><a class="button" href="/archive/?tag=Minecraft" title="Minecraft">Minecraft</a><a class="button" href="/archive/?tag=Forge" title="Forge">Forge</a></div><div class="post-misc"><div class="post-date"><i class="icon-calendar"></i>Feb 20, 2021</div></div></div><div class="post"><h2 id="no-rosetta"><a href="#no-rosetta">#</a> No Rosetta </h2><p>暑假的尾巴，姐妹们说，这是最后一次大家都这么有空，能在一起玩Minecraft了。某位腐竹（不错，正是在下）听了，不免有些哽咽。</p><p>不料寒假刚开始，又有姐妹在群里喊着开服。哎，毕竟放假了，要麻醉自我的嘛，真香。</p><p>房间里2700X+GTX960的中塔已经被我嫌占地儿，扔给了废品站；Windows的i7-7200U+940MX笔电玩Minecraft又卡顿。那么就只好在我的M1 MacBook上尝试尝试跑Minecraft咯。</p><p>既然已经在折腾了，不如玩ARM架构的原生Minecraft，不仅流畅，还高端大气（才不是因为不知道Rosetta怎么用呢）。</p><h2 id="运行的关键lwjgl"><a href="#运行的关键lwjgl">#</a> 运行的关键：LWJGL </h2><p>根据<a href="https://www.youtube.com/watch?v=Ui1MAhBYIdk" target="_blank" rel="nofollow noopener noreferrer">Tanmay Bakshi的教学视频</a>以及他的<a href="https://gist.github.com/tanmayb123/d55b16c493326945385e815453de411a" target="_blank" rel="nofollow noopener noreferrer">教程Gist</a>，Minecraft不能在M1 Macbook上直接运行的最大问题就在于Minecraft自带的<a href="https://github.com/LWJGL/lwjgl3" target="_blank" rel="nofollow noopener noreferrer">LWJGL库</a>还不能良好地兼容macOS-ARM64架构，因此需要从源码编译最新的LWJGL库。Tanmay已经编译好了运行原生MC需要使用的库，不过他搭配使用的命令行启动器hardcode了Minecraft版本。<a href="https://github.com/yusefnapora" target="_blank" rel="nofollow noopener noreferrer">yusefnapora</a>基于Tanmay的库文件制作了<a href="https://github.com/yusefnapora/m1-multimc-hack" target="_blank" rel="nofollow noopener noreferrer">Python自动脚本</a>。</p><p>不过既然都折腾了，我想用上自己经常使用的Hello Minecraft Launcher启动器（HMCL），无奈yusefnapora的脚本仅支持MultiMC启动器，这是由于MultiMC集中管理库文件的方式与其他Minecraft启动器不同。在花了一些时间研究之后，我找到了使用HMCL启动器在M1 MacBook上下载并启动Minecraft Forge客户端的方法。</p><p>安装运行方法结录如下。</p><h2 id="1-安装java"><a href="#1-安装java">#</a> 1. 安装Java </h2><p>第一步，安装Java，既然要抛开Rosetta使用Minecraft，那么必然要用到ARM原生JavaSE。</p><p>Minecraft使用的是在macOS上比Oracle Java更加高效的Zulu Java 11 JDK for macOS ARM64；由于HMCL调用JavaFX渲染界面，需要使用JavaFX，因此这里我下载JDK FX版本，打开<a href="https://www.azul.com/downloads/zulu-community/?version=java-11-lts&amp;os=macos&amp;architecture=arm-64-bit&amp;package=jdk-fx" target="_blank" rel="nofollow noopener noreferrer">下载页面</a>，如下图选择版本，下载DMG安装。</p><div class="post-img"><a href="/assets/img/in-post/post-macbook/zulu11.png" data-fancybox="gallery" data-caption="Zulu Java 11 JDK Download" data-path="post-macbook/zulu11.png" data-webpack="true"></a><em>Zulu Java 11 JDK Download</em></div><p>安装好之后，可以运行<code class="language-plaintext highlighter-rouge">/usr/libexec/java_home -V</code>查看系统中所有Java的版本。</p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>/usr/libexec/java_home <span class="nt">-V</span>
Matching Java Virtual Machines <span class="o">(</span>3<span class="o">)</span>:
    11.0.10 <span class="o">(</span>arm64<span class="o">)</span> <span class="s2">"Azul Systems, Inc."</span> - <span class="s2">"Zulu 11.45.27"</span> /Library/Java/JavaVirtualMachines/zulu-11.jdk/Contents/Home
</code></pre></div></div><p><code class="language-plaintext highlighter-rouge">Zulu 11.xx.xx</code>一行就是我们需要的Zulu JDK 11的安装目录，我通过修改<code class="language-plaintext highlighter-rouge">~/.zshrc</code>的方式来设置JAVA_HOME环境变量，告诉终端<code class="language-plaintext highlighter-rouge">java</code>命令应当运行哪个Java版本。</p><p>将下面的内容添加到<code class="language-plaintext highlighter-rouge">~/.zshrc</code>末尾。</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ~/.zshrc</span>
<span class="nb">export </span><span class="nv">JAVA_HOME</span><span class="o">=</span>/Library/Java/JavaVirtualMachines/zulu-11.jdk/Contents/Home
</code></pre></div></div><p>使用<code class="language-plaintext highlighter-rouge">source ~/.zshrc</code>或者重启终端使设置生效。</p><h2 id="2-下载hmcl"><a href="#2-下载hmcl">#</a> 2. 下载HMCL </h2><p>在<a href="https://hmcl.huangyuhui.net/download" target="_blank" rel="nofollow noopener noreferrer">HMCL官方网站</a>下载启动器，然后运行以下命令，建立一个游戏目录（例如<code class="language-plaintext highlighter-rouge">~/Games/Minecraft</code>），将启动器放置其中。</p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir</span> <span class="nt">-p</span> ~/Games/Minecraft/ <span class="c"># 建立游戏目录</span>
<span class="nb">mv</span> ~/Downloads/HMCL-3.3.181.jar ~/Games/Minecraft <span class="c"># 将HMCL移动到游戏目录</span>
java <span class="nt">-jar</span> HMCL-3.3.181.jar <span class="c"># 打开HMCL</span>
</code></pre></div></div><p>HMCL已经可以正常打开，此时如同往常一样，进入<code class="language-plaintext highlighter-rouge">版本列表</code>-&gt;<code class="language-plaintext highlighter-rouge">安装新游戏版本</code>，安装1.16.5版本Minecraft，并同时安装Forge。</p><div class="post-img"><a href="/assets/img/in-post/post-macbook/HMCL.png" data-fancybox="gallery" data-caption="Download 1.16.5 w/ Forge with HMCL" data-path="post-macbook/HMCL.png" data-webpack="true"></a><em>Download 1.16.5 w/ Forge with HMCL</em></div><h2 id="3-下载预编译的库文件"><a href="#3-下载预编译的库文件">#</a> 3. 下载预编译的库文件 </h2><p>如前述，要运行Forge版本的Minecraft，需要最新的LWJGL与经过<a href="https://github.com/glfw/glfw/pull/1833" target="_blank" rel="nofollow noopener noreferrer">修正后的GLFW库</a>。两个重要的库文件分别由Tanmay与<a href="https://github.com/0xQSL/m1-multimc-hack/tree/fix-forge" target="_blank" rel="nofollow noopener noreferrer">0xQSL</a>进行了修改与编译。</p><p>运行以下命令下载库文件，并将其移动到对应位置。</p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ~/Games/Minecraft <span class="c"># 进入游戏目录</span>
git clone https://github.com/DotIN13/m1-multimc-hack.git <span class="c"># 克隆所需的库文件到本地</span>
<span class="nb">mv </span>m1-multimc-hack/lwjglfat.jar .minecraft/libraries/org/lwjgl/lwjgl/3.2.1/lwjgl-3.2.1.jar <span class="c"># 将下载的LWJGL库放入Minecraft运行目录</span>
</code></pre></div></div><h2 id="4-使用hmcl导出启动脚本"><a href="#4-使用hmcl导出启动脚本">#</a> 4. 使用HMCL导出启动脚本 </h2><p>直接在HMCL启动不能另外指定库文件目录，因此，我们不能直接在HMCL软件内启动，需要导出启动脚本，使用脚本启动。</p><p>点击侧边栏中我们刚才安装的游戏版本，如<code class="language-plaintext highlighter-rouge">1.16.5-forge</code>，点击上方工具栏中的<code class="language-plaintext highlighter-rouge">扳手🔧</code>，确保下方的Java版本选中了刚才安装的Zulu JDK 11，并设置合适的内存大小。然后点击<code class="language-plaintext highlighter-rouge">生成启动脚本</code>，可以将脚本保存到<code class="language-plaintext highlighter-rouge">~/Games/Minecraft/start.sh</code>。</p><div class="post-img"><a href="/assets/img/in-post/post-macbook/minecraft-script.png" data-fancybox="gallery" data-caption="导出启动脚本" data-path="post-macbook/minecraft-script.png" data-webpack="true"></a><em>导出启动脚本</em></div><p>如下编辑<code class="language-plaintext highlighter-rouge">start.sh</code>并保存。</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 找到-Djava.library.path一段</span>
<span class="c"># 修改为"-Djava.library.path=/Users/你的用户名/Games/Minecraft/m1-multimc-hack/lwjglnatives/"</span>
<span class="c"># 让Java调用我们刚才下载的原生库文件</span>
</code></pre></div></div><h2 id="5-使用脚本启动minecraft"><a href="#5-使用脚本启动minecraft">#</a> 5. 使用脚本启动Minecraft！ </h2><p>进入终端，运行如下命令启动Minecraft。</p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ~/Games/Minecraft <span class="c"># 进入游戏目录</span>
./start.sh <span class="c"># 美妙的Minecraft启动界面映入眼帘</span>
</code></pre></div></div><div class="post-img"><a href="/assets/img/in-post/post-macbook/minecraft-starting.png" data-fancybox="gallery" data-caption="启动中..." data-path="post-macbook/minecraft-starting.png" data-webpack="true"></a><em>启动中...</em></div><div class="post-img"><a href="/assets/img/in-post/post-macbook/minecraft-splashscreen.png" data-fancybox="gallery" data-caption="主界面" data-path="post-macbook/minecraft-splashscreen.png" data-webpack="true"></a><em>主界面</em></div><p>打开Minecraft的过程很快，经过我的尝试，安装30个模组之后启动速度大约在一分钟以内；切换语言大约20秒内完成。游戏过程也较为稳定，没有出现过崩溃现象。</p><p>仅安装Forge进入游戏大约有110-120FPS，此时CPU占用100%，配置内存2GiB时实际占用2.8GiB。</p><div class="post-img"><a href="/assets/img/in-post/post-macbook/minecraft-cpu.png" data-fancybox="gallery" data-caption="CPU占用100%" data-path="post-macbook/minecraft-cpu.png" data-webpack="true"></a><em>CPU占用100%</em></div><div class="post-img"><a href="/assets/img/in-post/post-macbook/minecraft-mem.png" data-fancybox="gallery" data-caption="内存占用2.8GiB" data-path="post-macbook/minecraft-mem.png" data-webpack="true"></a><em>内存占用2.8GiB</em></div><h2 id="一个minecraft的梦想"><a href="#一个minecraft的梦想">#</a> 一个Minecraft的梦想 </h2><p>人类的想象力总是无穷的，有想象的地方，又总有将它们付诸实践的双手。众多玩家在M1上离开Rosetta运行Minecraft的梦想实现了，在M1上脱离虚拟机运行原生GNU/Linux的梦想似乎也不远了。</p><p>离开舒适圈，你我的梦想又驶向何方？</p></div><ul class="post-pager"><li class="pager--next"><a class="button" href="/2021/03/12/m1-macbook-sshfs/" data-toggle="tooltip" data-placement="top" title="在M1 Macbook上使用SSHFS挂载SFTP协议文件系统"> NEXT<br><span>在M1 Macbook上使用SSHFS挂载SFTP协议文件系统</span></a></li><li class="pager--prev"><a class="button" href="/2021/02/19/m1-macbook-rbenv/" data-toggle="tooltip" data-placement="top" title="在M1 MacBook上优雅地安装Rbenv+Ruby"> PREV<br><span>在M1 MacBook上优雅地安装Rbenv+Ruby</span></a></li></ul><div id="vcomments"></div></div></section><footer class="about condensed"><ul class="social condensed"><li><a target="_blank" rel="noreferrer" href="https://github.com/DotIN13" aria-label="GitHub Social Link"><span class="fa-stack fa-2x"><i class="fas icon-circle fa-stack-2x"></i><i class="fab icon-github fa-stack-1x fa-inverse"></i></span></a></li><li><a target="_blank" rel="noreferrer" href="https://www.facebook.com/peter.zhang.1466" aria-label="Facebook Social Link"><span class="fa-stack fa-2x"><i class="fas icon-circle fa-stack-2x"></i><i class="fab icon-facebook fa-stack-1x fa-inverse"></i></span></a></li><li><a target="_blank" rel="noreferrer" href="https://twitter.com/DotIN13" aria-label="Twitter Social Link"><span class="fa-stack fa-2x"><i class="fas icon-circle fa-stack-2x"></i><i class="fab icon-twitter fa-stack-1x fa-inverse"></i></span></a></li><li><a target="_blank" rel="noreferrer" href="https://space.bilibili.com/4471331" aria-label="Bilibili Social Link"><span class="fa-stack fa-2x"><i class="fas icon-circle fa-stack-2x"></i><i class="icon-bilibili fa-stack-1x fa-inverse"></i></span></a></li></ul><nav class="navigation condensed"><ul><li><a href="/about">About</a></li><li><a href="/archive">Archive</a></li></ul></nav><section class="about-footer condensed"><div><a href="https://icp.gov.moe" rel="noreferrer" target="_blank">Moe ICP </a><a href="https://icp.gov.moe/?keyword=20201620" target="_blank" rel="noreferrer">20201620</a></div><div><a rel="noreferrer" href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank">CC-BY-SA 4.0</a></div></section></footer></main><script async src="https://www.googletagmanager.com/gtag/js?id=UA-159368053-1"></script><script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());

        gtag('config', 'UA-159368053-1');
    </script></body></html>