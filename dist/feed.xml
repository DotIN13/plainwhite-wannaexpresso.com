<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom"><generator uri="https://jekyllrb.com/" version="4.2.0">Jekyll</generator><link href="https://www.wannaexpresso.com/feed.xml" rel="self" type="application/atom+xml"/><link href="https://www.wannaexpresso.com/" rel="alternate" type="text/html"/><updated>2021-03-17T22:11:30+08:00</updated><id>https://www.wannaexpresso.com/feed.xml</id><title type="html">LACKAWANNA EXPRESSO</title><subtitle>Act local, think global with DotIN13!</subtitle><author><name>DotIN13</name></author><entry><title type="html">在M1 Macbook上使用SSHFS挂载SFTP协议文件系统</title><link href="https://www.wannaexpresso.com/2021/03/12/m1-macbook-sshfs/" rel="alternate" type="text/html" title="在M1 Macbook上使用SSHFS挂载SFTP协议文件系统"/><published>2021-03-12T00:00:00+08:00</published><updated>2021-03-12T00:00:00+08:00</updated><id>https://www.wannaexpresso.com/2021/03/12/m1-macbook-sshfs</id><content type="html" xml:base="https://www.wannaexpresso.com/2021/03/12/m1-macbook-sshfs/">&lt;h2 id=&quot;无中生有的需求&quot;&gt;无中生有的需求&lt;/h2&gt; &lt;p&gt;- 其实我并不怎么看电影。&lt;/p&gt; &lt;p&gt;- ……好吧，我承认，偶尔想看……又或许只是喜欢拥有的感觉罢了。&lt;/p&gt; &lt;p&gt;欲望，总是在无边无际地扩张。“不得已”买了Raspberry Pi，向辣爸讨了块3TB机械，也算入了NAS的门。&lt;/p&gt; &lt;p&gt;过去用着Manjaro+Windows，可以直接在&lt;a href=&quot;https://gitlab.gnome.org/GNOME/nautilus&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Gnome Nautilus&lt;/a&gt;中挂载树莓派的SFTP服务器，双击视频就可以通过&lt;a href=&quot;https://celluloid-player.github.io/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Celluloid&lt;/a&gt;播放。然而这在macOS上似乎没有完美的解决方案，试用了&lt;a href=&quot;https://cyberduck.io/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Cyberduck&lt;/a&gt;、&lt;a href=&quot;https://www.panic.com/transmit/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Tansmit&lt;/a&gt;、&lt;a href=&quot;https://electerm.github.io/electerm/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Electerm&lt;/a&gt;，却发现统统不能做到Manjaro上那样丝滑的体验。最好的方案也只能用FileZilla右键获取&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sftp://&lt;/code&gt;地址后粘贴到VLC播放。&lt;/p&gt; &lt;p&gt;于是，目光转向歪门邪道——尝试挂载服务器到Finder。&lt;/p&gt; &lt;h2 id=&quot;百无一用的折腾&quot;&gt;百无一用的折腾&lt;/h2&gt; &lt;p&gt;&lt;a href=&quot;https://github.com/libfuse/sshfs&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;SSHFS&lt;/a&gt;似乎是我能找到的唯一挂载方案。&lt;/p&gt; &lt;h3 id=&quot;安装macfuse&quot;&gt;安装macFUSE&lt;/h3&gt; &lt;p&gt;从官网下载&lt;a href=&quot;https://github.com/osxfuse/osxfuse/releases/download/macfuse-4.0.5/macfuse-4.0.5.dmg&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;macFUSE 4.0.5&lt;/a&gt;，直接打开&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.dmg&lt;/code&gt;文件安装。安装完成后不出意外需要重启macOS。&lt;/p&gt; &lt;h3 id=&quot;安装编译依赖&quot;&gt;安装编译依赖&lt;/h3&gt; &lt;p&gt;老规矩，用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;homebrew&lt;/code&gt;安装依赖最为简便快捷。&lt;/p&gt; &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# Install Apple Development Tools&lt;/span&gt; xcode-select &lt;span class=&quot;nt&quot;&gt;--install&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# Install Homebrew&lt;/span&gt; /bin/bash &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;curl &lt;span class=&quot;nt&quot;&gt;-fsSL&lt;/span&gt; https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;然后安装必须的依赖，包括python与glib。&lt;/p&gt; &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;brew &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;python@3.9 brew &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;glib &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h3 id=&quot;下载并修改sshfs源码&quot;&gt;下载并修改SSHFS源码&lt;/h3&gt; &lt;p&gt;由于最新版的SSHFS 3.7.1并不支持macOS，因此需要从&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;GitHub&lt;/code&gt;的&lt;a href=&quot;https://github.com/libfuse/sshfs/releases/tag/sshfs-2.10&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Repo&lt;/a&gt;下载&lt;a href=&quot;https://github.com/libfuse/sshfs/releases/download/sshfs-2.10/sshfs-2.10.tar.gz&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;2.10版本的源码&lt;/a&gt;。&lt;/p&gt; &lt;p&gt;解压后，根据&lt;a href=&quot;https://github.com/osxfuse/sshfs/pull/58&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Pull Request #58&lt;/a&gt;的提示，找到&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;#1724&lt;/code&gt;行，修改&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sshfs.sync_read&lt;/code&gt;为0。&lt;/p&gt; &lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// Force async even if kernel claims its doing async.&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// MacOS, see https://github.com/osxfuse/sshfs/issues/57&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sshfs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sync_read&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;然后，修改&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;#18&lt;/code&gt;行的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;# include &amp;lt;fuse_darwin.h&amp;gt;&lt;/code&gt;为&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;#include &amp;lt;fuse.h&amp;gt;&lt;/code&gt;。&lt;/p&gt; &lt;h3 id=&quot;编译&quot;&gt;编译&lt;/h3&gt; &lt;p&gt;参照&lt;a href=&quot;https://github.com/osxfuse/sshfs#installing&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;SSHFS编译指南&lt;/a&gt;进行编译。首先&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cd&lt;/code&gt;进入解压得到的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sshfs-2.10&lt;/code&gt;文件夹，然后依次运行如下指令进行编译。&lt;/p&gt; &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;./configure make &lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;make &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h3 id=&quot;运行&quot;&gt;运行&lt;/h3&gt; &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sshfs &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;user@]host:[dir] mountpoint &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;options] &lt;span class=&quot;c&quot;&gt;# sshfs [用户名@]服务器地址:[服务器路径] 本地挂载路径 [选项]&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;初次挂载不成功，因为macFUSE需要向系统添加内核插件。macFUSE提示，要进入&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;系统设置-&amp;gt;安全与隐私&lt;/code&gt;（&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;System Preferences -&amp;gt; Security and Privicy&lt;/code&gt;）关闭系统安全机制，才能够正确加载挂载所需的内核插件。&lt;/p&gt; &lt;div class=&quot;post-img&quot;&gt; &lt;a href=&quot;/assets/img/in-post/post-macbook/system-ext.png&quot; data-fancybox=&quot;gallery&quot; data-caption=&quot;Prompt To Enable System Extentions&quot; data-path=&quot;post-macbook/system-ext.png&quot; data-webpack=&quot;true&quot;&gt;&lt;/a&gt;&lt;em&gt;Prompt To Enable System Extentions&lt;/em&gt;&lt;/div&gt; &lt;p&gt;依照&lt;a href=&quot;https://support.apple.com/zh-cn/guide/mac-help/mchl768f7291/11.0/mac/11.0&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Apple官方指南&lt;/a&gt;进入恢复模式进行修改。&lt;/p&gt; &lt;ol&gt; &lt;li&gt; &lt;p&gt;在搭载 Apple 芯片的 Mac 上，选取苹果&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;菜单-&amp;gt;关机&lt;/code&gt;。&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;按住电源按钮直至看到&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;正在载入启动选项&lt;/code&gt;。&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;点按&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;选项&lt;/code&gt;，然后点按&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;继续&lt;/code&gt;。&lt;/p&gt; &lt;p&gt;如有要求，请输入管理员帐户的密码。&lt;/p&gt; &lt;p&gt;Mac 将以恢复模式（Recovery Mode）打开。&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;在&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;macOS 恢复&lt;/code&gt;中，选取&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;实用工具-&amp;gt;启动安全性实用工具&lt;/code&gt;（Startup Security Utilities）。&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;选择要用于设定安全策略的启动磁盘。&lt;/p&gt; &lt;p&gt;如果磁盘已使用文件保险箱加密，请点按&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;解锁&lt;/code&gt;，输入密码，然后点按&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;解锁&lt;/code&gt;。&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;点按&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;安全策略&lt;/code&gt;（Security Policy）。&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;检查以下安全性选项：&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;em&gt;完整安全性：&lt;/em&gt;确保只有当前的操作系统或者当前 Apple 信任的签名操作系统软件才能运行。此模式要求在安装软件时接入网络。&lt;/li&gt; &lt;li&gt;&lt;em&gt;降低安全性：&lt;/em&gt;允许运行 Apple 信任过的任何版本的签名操作系统软件。&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;我们需要选择&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;降低安全性&lt;/code&gt;来启用macFUSE，输入管理员用户名和密码：&lt;/p&gt; &lt;ul&gt; &lt;li&gt;选择“允许用户管理来自被认可开发者的内核扩展”复选框以允许使用旧版内核扩展的软件进行安装。&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;点按&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;好&lt;/code&gt;，重新启动 Mac 以使更改生效。&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt; &lt;p&gt;此时再进入&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;系统设置-&amp;gt;安全与隐私&lt;/code&gt;，发现下方已经多出了一个选项，选择后，可以运行任何来源的系统软件。再次运行&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sshfs&lt;/code&gt;命令，已经可以挂载。&lt;/p&gt; &lt;h2 id=&quot;乏善可陈的疗效&quot;&gt;乏善可陈的疗效&lt;/h2&gt; &lt;p&gt;然而，在我花了几个小时安装、挂载成功之后，竟觉食之无味，弃之可惜。&lt;/p&gt; &lt;p&gt;使用FileZilla可以达到30MB/s内网的传输速度，而挂载的SSHFS文件系统仅仅能达到数十KB/s，完全无法流畅串流视频。&lt;/p&gt; &lt;p&gt;不总是止步，不总是成功；不总是成功，不总是止步。&lt;/p&gt;</content><author><name>DotIN13</name></author><category term="Apple Silicon"/><category term="MacBook"/><category term="SSHFS"/><category term="SFTP"/><category term="Linux"/><category term="macFUSE"/><summary type="html">无中生有的需求</summary></entry><entry><title type="html">在M1 Macbook上不使用Rosetta优雅地游玩Minecraft+Forge</title><link href="https://www.wannaexpresso.com/2021/02/20/m1-macbook-minecraft/" rel="alternate" type="text/html" title="在M1 Macbook上不使用Rosetta优雅地游玩Minecraft+Forge"/><published>2021-02-20T00:00:00+08:00</published><updated>2021-02-20T00:00:00+08:00</updated><id>https://www.wannaexpresso.com/2021/02/20/m1-macbook-minecraft</id><content type="html" xml:base="https://www.wannaexpresso.com/2021/02/20/m1-macbook-minecraft/">&lt;h2 id=&quot;no-rosetta&quot;&gt;No Rosetta&lt;/h2&gt; &lt;p&gt;暑假的尾巴，姐妹们说，这是最后一次大家都这么有空，能在一起玩Minecraft了。某位腐竹（不错，正是在下）听了，不免有些哽咽。&lt;/p&gt; &lt;p&gt;不料寒假刚开始，又有姐妹在群里喊着开服。哎，毕竟放假了，要麻醉自我的嘛，真香。&lt;/p&gt; &lt;p&gt;房间里2700X+GTX960的中塔已经被我嫌占地儿，扔给了废品站；Windows的i7-7200U+940MX笔电玩Minecraft又卡顿。那么就只好在我的M1 MacBook上尝试尝试跑Minecraft咯。&lt;/p&gt; &lt;p&gt;既然已经在折腾了，不如玩ARM架构的原生Minecraft，不仅流畅，还高端大气（才不是因为不知道Rosetta怎么用呢）。&lt;/p&gt; &lt;h2 id=&quot;运行的关键lwjgl&quot;&gt;运行的关键：LWJGL&lt;/h2&gt; &lt;p&gt;根据&lt;a href=&quot;https://www.youtube.com/watch?v=Ui1MAhBYIdk&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Tanmay Bakshi的教学视频&lt;/a&gt;以及他的&lt;a href=&quot;https://gist.github.com/tanmayb123/d55b16c493326945385e815453de411a&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;教程Gist&lt;/a&gt;，Minecraft不能在M1 Macbook上直接运行的最大问题就在于Minecraft自带的&lt;a href=&quot;https://github.com/LWJGL/lwjgl3&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;LWJGL库&lt;/a&gt;还不能良好地兼容macOS-ARM64架构，因此需要从源码编译最新的LWJGL库。Tanmay已经编译好了运行原生MC需要使用的库，不过他搭配使用的命令行启动器hardcode了Minecraft版本。&lt;a href=&quot;https://github.com/yusefnapora&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;yusefnapora&lt;/a&gt;基于Tanmay的库文件制作了&lt;a href=&quot;https://github.com/yusefnapora/m1-multimc-hack&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Python自动脚本&lt;/a&gt;。&lt;/p&gt; &lt;p&gt;不过既然都折腾了，我想用上自己经常使用的Hello Minecraft Launcher启动器（HMCL），无奈yusefnapora的脚本仅支持MultiMC启动器，这是由于MultiMC集中管理库文件的方式与其他Minecraft启动器不同。在花了一些时间研究之后，我找到了使用HMCL启动器在M1 MacBook上下载并启动Minecraft Forge客户端的方法。&lt;/p&gt; &lt;p&gt;安装运行方法结录如下。&lt;/p&gt; &lt;h2 id=&quot;1-安装java&quot;&gt;1. 安装Java&lt;/h2&gt; &lt;p&gt;第一步，安装Java，既然要抛开Rosetta使用Minecraft，那么必然要用到ARM原生JavaSE。&lt;/p&gt; &lt;p&gt;Minecraft使用的是在macOS上比Oracle Java更加高效的Zulu Java 11 JDK for macOS ARM64；由于HMCL调用JavaFX渲染界面，需要使用JavaFX，因此这里我下载JDK FX版本，打开&lt;a href=&quot;https://www.azul.com/downloads/zulu-community/?version=java-11-lts&amp;amp;os=macos&amp;amp;architecture=arm-64-bit&amp;amp;package=jdk-fx&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;下载页面&lt;/a&gt;，如下图选择版本，下载DMG安装。&lt;/p&gt; &lt;div class=&quot;post-img&quot;&gt; &lt;a href=&quot;/assets/img/in-post/post-macbook/zulu11.png&quot; data-fancybox=&quot;gallery&quot; data-caption=&quot;Zulu Java 11 JDK Download&quot; data-path=&quot;post-macbook/zulu11.png&quot; data-webpack=&quot;true&quot;&gt;&lt;/a&gt;&lt;em&gt;Zulu Java 11 JDK Download&lt;/em&gt;&lt;/div&gt; &lt;p&gt;安装好之后，可以运行&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/usr/libexec/java_home -V&lt;/code&gt;查看系统中所有Java的版本。&lt;/p&gt; &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;/usr/libexec/java_home &lt;span class=&quot;nt&quot;&gt;-V&lt;/span&gt; Matching Java Virtual Machines &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;3&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;: 11.0.10 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;arm64&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Azul Systems, Inc.&quot;&lt;/span&gt; - &lt;span class=&quot;s2&quot;&gt;&quot;Zulu 11.45.27&quot;&lt;/span&gt; /Library/Java/JavaVirtualMachines/zulu-11.jdk/Contents/Home &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Zulu 11.xx.xx&lt;/code&gt;一行就是我们需要的Zulu JDK 11的安装目录，我通过修改&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~/.zshrc&lt;/code&gt;的方式来设置JAVA_HOME环境变量，告诉终端&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;java&lt;/code&gt;命令应当运行哪个Java版本。&lt;/p&gt; &lt;p&gt;将下面的内容添加到&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~/.zshrc&lt;/code&gt;末尾。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# ~/.zshrc&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;JAVA_HOME&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/Library/Java/JavaVirtualMachines/zulu-11.jdk/Contents/Home &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;使用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;source ~/.zshrc&lt;/code&gt;或者重启终端使设置生效。&lt;/p&gt; &lt;h2 id=&quot;2-下载hmcl&quot;&gt;2. 下载HMCL&lt;/h2&gt; &lt;p&gt;在&lt;a href=&quot;https://hmcl.huangyuhui.net/download&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;HMCL官方网站&lt;/a&gt;下载启动器，然后运行以下命令，建立一个游戏目录（例如&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~/Games/Minecraft&lt;/code&gt;），将启动器放置其中。&lt;/p&gt; &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;mkdir&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; ~/Games/Minecraft/ &lt;span class=&quot;c&quot;&gt;# 建立游戏目录&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;mv&lt;/span&gt; ~/Downloads/HMCL-3.3.181.jar ~/Games/Minecraft &lt;span class=&quot;c&quot;&gt;# 将HMCL移动到游戏目录&lt;/span&gt; java &lt;span class=&quot;nt&quot;&gt;-jar&lt;/span&gt; HMCL-3.3.181.jar &lt;span class=&quot;c&quot;&gt;# 打开HMCL&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;HMCL已经可以正常打开，此时如同往常一样，进入&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;版本列表&lt;/code&gt;-&amp;gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;安装新游戏版本&lt;/code&gt;，安装1.16.5版本Minecraft，并同时安装Forge。&lt;/p&gt; &lt;div class=&quot;post-img&quot;&gt; &lt;a href=&quot;/assets/img/in-post/post-macbook/HMCL.png&quot; data-fancybox=&quot;gallery&quot; data-caption=&quot;Download 1.16.5 w/ Forge with HMCL&quot; data-path=&quot;post-macbook/HMCL.png&quot; data-webpack=&quot;true&quot;&gt;&lt;/a&gt;&lt;em&gt;Download 1.16.5 w/ Forge with HMCL&lt;/em&gt;&lt;/div&gt; &lt;h2 id=&quot;3-下载预编译的库文件&quot;&gt;3. 下载预编译的库文件&lt;/h2&gt; &lt;p&gt;如前述，要运行Forge版本的Minecraft，需要最新的LWJGL与经过&lt;a href=&quot;https://github.com/glfw/glfw/pull/1833&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;修正后的GLFW库&lt;/a&gt;。两个重要的库文件分别由Tanmay与&lt;a href=&quot;https://github.com/0xQSL/m1-multimc-hack/tree/fix-forge&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;0xQSL&lt;/a&gt;进行了修改与编译。&lt;/p&gt; &lt;p&gt;运行以下命令下载库文件，并将其移动到对应位置。&lt;/p&gt; &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; ~/Games/Minecraft &lt;span class=&quot;c&quot;&gt;# 进入游戏目录&lt;/span&gt; git clone https://github.com/DotIN13/m1-multimc-hack.git &lt;span class=&quot;c&quot;&gt;# 克隆所需的库文件到本地&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;mv &lt;/span&gt;m1-multimc-hack/lwjglfat.jar .minecraft/libraries/org/lwjgl/lwjgl/3.2.1/lwjgl-3.2.1.jar &lt;span class=&quot;c&quot;&gt;# 将下载的LWJGL库放入Minecraft运行目录&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;4-使用hmcl导出启动脚本&quot;&gt;4. 使用HMCL导出启动脚本&lt;/h2&gt; &lt;p&gt;直接在HMCL启动不能另外指定库文件目录，因此，我们不能直接在HMCL软件内启动，需要导出启动脚本，使用脚本启动。&lt;/p&gt; &lt;p&gt;点击侧边栏中我们刚才安装的游戏版本，如&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;1.16.5-forge&lt;/code&gt;，点击上方工具栏中的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;扳手🔧&lt;/code&gt;，确保下方的Java版本选中了刚才安装的Zulu JDK 11，并设置合适的内存大小。然后点击&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;生成启动脚本&lt;/code&gt;，可以将脚本保存到&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~/Games/Minecraft/start.sh&lt;/code&gt;。&lt;/p&gt; &lt;div class=&quot;post-img&quot;&gt; &lt;a href=&quot;/assets/img/in-post/post-macbook/minecraft-script.png&quot; data-fancybox=&quot;gallery&quot; data-caption=&quot;导出启动脚本&quot; data-path=&quot;post-macbook/minecraft-script.png&quot; data-webpack=&quot;true&quot;&gt;&lt;/a&gt;&lt;em&gt;导出启动脚本&lt;/em&gt;&lt;/div&gt; &lt;p&gt;如下编辑&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;start.sh&lt;/code&gt;并保存。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# 找到-Djava.library.path一段&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# 修改为&quot;-Djava.library.path=/Users/你的用户名/Games/Minecraft/m1-multimc-hack/lwjglnatives/&quot;&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# 让Java调用我们刚才下载的原生库文件&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;5-使用脚本启动minecraft&quot;&gt;5. 使用脚本启动Minecraft！&lt;/h2&gt; &lt;p&gt;进入终端，运行如下命令启动Minecraft。&lt;/p&gt; &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; ~/Games/Minecraft &lt;span class=&quot;c&quot;&gt;# 进入游戏目录&lt;/span&gt; ./start.sh &lt;span class=&quot;c&quot;&gt;# 美妙的Minecraft启动界面映入眼帘&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;div class=&quot;post-img&quot;&gt; &lt;a href=&quot;/assets/img/in-post/post-macbook/minecraft-starting.png&quot; data-fancybox=&quot;gallery&quot; data-caption=&quot;启动中...&quot; data-path=&quot;post-macbook/minecraft-starting.png&quot; data-webpack=&quot;true&quot;&gt;&lt;/a&gt;&lt;em&gt;启动中...&lt;/em&gt;&lt;/div&gt; &lt;div class=&quot;post-img&quot;&gt; &lt;a href=&quot;/assets/img/in-post/post-macbook/minecraft-splashscreen.png&quot; data-fancybox=&quot;gallery&quot; data-caption=&quot;主界面&quot; data-path=&quot;post-macbook/minecraft-splashscreen.png&quot; data-webpack=&quot;true&quot;&gt;&lt;/a&gt;&lt;em&gt;主界面&lt;/em&gt;&lt;/div&gt; &lt;p&gt;打开Minecraft的过程很快，经过我的尝试，安装30个模组之后启动速度大约在一分钟以内；切换语言大约20秒内完成。游戏过程也较为稳定，没有出现过崩溃现象。&lt;/p&gt; &lt;p&gt;仅安装Forge进入游戏大约有110-120FPS，此时CPU占用100%，配置内存2GiB时实际占用2.8GiB。&lt;/p&gt; &lt;div class=&quot;post-img&quot;&gt; &lt;a href=&quot;/assets/img/in-post/post-macbook/minecraft-cpu.png&quot; data-fancybox=&quot;gallery&quot; data-caption=&quot;CPU占用100%&quot; data-path=&quot;post-macbook/minecraft-cpu.png&quot; data-webpack=&quot;true&quot;&gt;&lt;/a&gt;&lt;em&gt;CPU占用100%&lt;/em&gt;&lt;/div&gt; &lt;div class=&quot;post-img&quot;&gt; &lt;a href=&quot;/assets/img/in-post/post-macbook/minecraft-mem.png&quot; data-fancybox=&quot;gallery&quot; data-caption=&quot;内存占用2.8GiB&quot; data-path=&quot;post-macbook/minecraft-mem.png&quot; data-webpack=&quot;true&quot;&gt;&lt;/a&gt;&lt;em&gt;内存占用2.8GiB&lt;/em&gt;&lt;/div&gt; &lt;h2 id=&quot;一个minecraft的梦想&quot;&gt;一个Minecraft的梦想&lt;/h2&gt; &lt;p&gt;人类的想象力总是无穷的，有想象的地方，又总有将它们付诸实践的双手。众多玩家在M1上离开Rosetta运行Minecraft的梦想实现了，在M1上脱离虚拟机运行原生GNU/Linux的梦想似乎也不远了。&lt;/p&gt; &lt;p&gt;离开舒适圈，你我的梦想又驶向何方？&lt;/p&gt;</content><author><name>DotIN13</name></author><category term="Apple Silicon"/><category term="MacBook"/><category term="Minecraft"/><category term="Forge"/><summary type="html">No Rosetta</summary></entry><entry><title type="html">在M1 MacBook上优雅地安装Rbenv+Ruby</title><link href="https://www.wannaexpresso.com/2021/02/19/m1-macbook-rbenv/" rel="alternate" type="text/html" title="在M1 MacBook上优雅地安装Rbenv+Ruby"/><published>2021-02-19T00:00:00+08:00</published><updated>2021-02-19T00:00:00+08:00</updated><id>https://www.wannaexpresso.com/2021/02/19/m1-macbook-rbenv</id><content type="html" xml:base="https://www.wannaexpresso.com/2021/02/19/m1-macbook-rbenv/">&lt;h2 id=&quot;ruby-on-m1-macbook&quot;&gt;Ruby on M1 MacBook&lt;/h2&gt; &lt;p&gt;看起来有不少尝鲜购入M1 MacBook的朋友装上了x86的homebrew，导致在编译Ruby时遇到了错误。事实上，如果使用了正确的ARM64 Homebrew，就已经可以正常地编译使用rbenv+Ruby了。&lt;/p&gt; &lt;div class=&quot;post-img&quot;&gt; &lt;a href=&quot;/assets/img/in-post/post-macbook/ruby-versions.png&quot; data-fancybox=&quot;gallery&quot; data-caption=&quot;My Ruby Environment&quot; data-path=&quot;post-macbook/ruby-versions.png&quot; data-webpack=&quot;true&quot;&gt;&lt;/a&gt;&lt;em&gt;My Ruby Environment&lt;/em&gt;&lt;/div&gt; &lt;p&gt;系统自带的是Ruby-2.6.3，我已经成功使用rbenv安装了2.7.2用来写作Jekyll，并且准备用3.0.0来继续开发我的Rails项目。&lt;/p&gt; &lt;h2 id=&quot;安装步骤&quot;&gt;安装步骤&lt;/h2&gt; &lt;h3 id=&quot;1-homebrew&quot;&gt;1. Homebrew&lt;/h3&gt; &lt;p&gt;Ruby编译需要安装ARM64版本的openssl，所以需要安装3.0.0以上版本适用于Apple Silicon的Homebrew。默认运行&lt;a href=&quot;[ Homebrewbrew.sh](https://brew.sh/)&quot;&gt;官方网站&lt;/a&gt;的脚本即可安装正确版本的Homebrew，新版Homebrew的工作目录在&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/opt/homebrew&lt;/code&gt;。&lt;/p&gt; &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/bin/bash &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;curl &lt;span class=&quot;nt&quot;&gt;-fsSL&lt;/span&gt; https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;脚本全自动运行，按照提示安装即可，可以使用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;brew -v&lt;/code&gt;查看brew版本，并确保brew被安装到了&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/opt/homebrew&lt;/code&gt;。&lt;/p&gt; &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;brew &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; Homebrew 3.0.1-93-g53d840c Homebrew/homebrew-core &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;git revision 70345&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; last commit 2021-02-17&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; Homebrew/homebrew-cask &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;git revision 0ab858&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; last commit 2021-02-18&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;which brew /opt/homebrew/bin/brew &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h3 id=&quot;2-安装rbenvreadline和openssl&quot;&gt;2. 安装rbenv、readline和openssl&lt;/h3&gt; &lt;p&gt;接下来使用上一步安装的Homebrew安装rbenv。&lt;/p&gt; &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;brew &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;rbenv &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;使用ruby-build编译ARM64的Ruby还需要安装对应的ARM64版本readline和openssl。&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;brew install readline brew install openssl &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;然后将下述的环境变量添加到&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~/.zshrc&lt;/code&gt;的末尾。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# ~/.zshrc&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# rbenv&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;RBENV_ROOT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/opt/homebrew/opt/rbenv &lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;PATH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$RBENV_ROOT&lt;/span&gt;/bin:&lt;span class=&quot;nv&quot;&gt;$PATH&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;eval&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;rbenv init -&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# Use native openssl libraries for building&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;PATH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;/opt/homebrew/opt/openssl@1.1/bin:&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$PATH&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;LDFLAGS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;-L/opt/homebrew/opt/openssl@1.1/lib&quot;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;CPPFLAGS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;-I/opt/homebrew/opt/openssl@1.1/include&quot;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;PKG_CONFIG_PATH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;/opt/homebrew/opt/openssl@1.1/lib/pkgconfig&quot;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;RUBY_CONFIGURE_OPTS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;--with-openssl-dir=/opt/homebrew/opt/openssl@1.1&quot;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;运行&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;source ~/.zshrc&lt;/code&gt;或者重启Terminal来使环境变量生效。&lt;/p&gt; &lt;h3 id=&quot;3-安装ruby&quot;&gt;3. 安装Ruby&lt;/h3&gt; &lt;p&gt;此时安装2.7.2及以上版本Ruby只需直接运行&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rbenv install (version)&lt;/code&gt;即可。&lt;/p&gt; &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# Example&lt;/span&gt; rbenv &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;2.7.2 rbenv global 2.7.2 rbenv rehash &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;如果需要安装更低版本的Ruby，则要额外添加一个FLAG。&lt;/p&gt; &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# Example&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;RUBY_CFLAGS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;-Wno-error=implicit-function-declaration&quot;&lt;/span&gt; rbenv &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;2.5.3 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h3 id=&quot;代理&quot;&gt;代理&lt;/h3&gt; &lt;p&gt;如果安装过程出现SSL错误，那么你可能需要代理来下载Ruby源码。将下面的代码添加到&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~/.zshrc&lt;/code&gt;的末尾，将&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ip:port&lt;/code&gt;替换成你的代理服务器ip与端口。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# ~/.zshrc&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;http_proxy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://ip:port&quot;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;HTTP_PROXY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;http_proxy&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;https_proxy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;http_proxy&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;HTTPS_PROXY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;http_proxy&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;同样地，运行&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;source ~/.zshrc&lt;/code&gt;或者重启Terminal来使环境变量生效，然后再重复上一步。&lt;/p&gt; &lt;h2 id=&quot;皆大欢喜&quot;&gt;皆大欢喜&lt;/h2&gt; &lt;p&gt;此刻运行&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ruby -v&lt;/code&gt;，就可以发现刚才安装的ruby已经可以运行，开始愉快的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bundle&lt;/code&gt;吧！&lt;/p&gt; &lt;p&gt;开工是不会开工的，只会装好了环境就开始摸鱼这样子。&lt;/p&gt; &lt;p&gt;参考：&lt;a href=&quot;https://github.com/rbenv/ruby-build/issues/1691&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;GitHub/ruby-build#1691&lt;/a&gt;&lt;/p&gt;</content><author><name>DotIN13</name></author><category term="Apple Silicon"/><category term="MacBook"/><category term="Rbenv"/><category term="Ruby"/><category term="Homebrew"/><summary type="html">Ruby on M1 MacBook</summary></entry><entry><title type="html">M1 MacBook Air轻体验</title><link href="https://www.wannaexpresso.com/2021/02/14/m1-macbook-experience/" rel="alternate" type="text/html" title="M1 MacBook Air轻体验"/><published>2021-02-14T00:00:00+08:00</published><updated>2021-02-14T00:00:00+08:00</updated><id>https://www.wannaexpresso.com/2021/02/14/m1-macbook-experience</id><content type="html" xml:base="https://www.wannaexpresso.com/2021/02/14/m1-macbook-experience/">&lt;p&gt;今情人佳节，谨以此文献余妻王氏。&lt;/p&gt; &lt;h2 id=&quot;别了thinkbook&quot;&gt;别了，Thinkbook&lt;/h2&gt; &lt;div class=&quot;post-img float-md-end&quot;&gt; &lt;a href=&quot;/assets/img/in-post/post-macbook/idlefish.jpg&quot; data-fancybox=&quot;gallery&quot; data-caption=&quot;Thinkbook Sold&quot; data-path=&quot;post-macbook/idlefish.jpg&quot; data-webpack=&quot;true&quot;&gt;&lt;/a&gt;&lt;em&gt;Thinkbook Sold&lt;/em&gt;&lt;/div&gt; &lt;p&gt;4500大洋购置的Thinkbook 14 2021锐龙版金玉其外，败絮其中。纸面上拓展性过人、高色域、性能释放达到25W，事实上呢，屏幕不通透，略微侧看便有彩色颗粒；触摸板没有玻璃覆盖，手汗稍多便非常涩爪，贴上磨砂膜同样影响手感。对于我这种轻度办公用户来说，相较于原先的ASUS U3000UQ几乎没有本质的提升，反而在显示、触控方面体验降级。于是，50包邮解余愁。&lt;/p&gt; &lt;p&gt;江湖人说，闲鱼不常去，免不了玄鱼。流通价格心里头没数，50包邮的价似乎略低，不过它也算是陪伴我度过了一个期末，价值基本榨取干净了，便宜就姑且便宜了吧。怎么说呢，下家若是不喜欢，是不是还能倒赚一笔。&lt;/p&gt; &lt;h2 id=&quot;你好m1-macbook&quot;&gt;你好，M1 MacBook&lt;/h2&gt; &lt;p&gt;老婆用的是旧款的Intel MacBook Air，摸一爪子，温润，略有些心动。寒假回家旁敲侧击，周旋至浦东Apple Store，一举又骗得8999大洋的M1 MBA。私心里想着要和老婆搭配，不要Pro，不要银色，只要那金色的Air，店员几乎有些不解，我莞尔一笑，他便也心领神会不再多问，给我取来机子下了单。&lt;/p&gt; &lt;div class=&quot;post-img&quot;&gt; &lt;a href=&quot;/assets/img/in-post/post-macbook/in-store.jpg&quot; data-fancybox=&quot;gallery&quot; data-caption=&quot;New MacBook&quot; data-path=&quot;post-macbook/in-store.jpg&quot; data-webpack=&quot;true&quot;&gt;&lt;/a&gt;&lt;em&gt;New MacBook&lt;/em&gt;&lt;/div&gt; &lt;p&gt;包装盒很紧，是正品，孩子很喜欢，下次还会再来。&lt;/p&gt; &lt;h2 id=&quot;first-impressions&quot;&gt;First Impressions&lt;/h2&gt; &lt;p&gt;艺术品。&lt;/p&gt; &lt;p&gt;打开防静电袋，揭开屏幕防尘布，扑面而来的是一种奢侈感。&lt;/p&gt; &lt;h3 id=&quot;前任-s&quot;&gt;前任 (s)&lt;/h3&gt; &lt;p&gt;如果说Thinkbook代表的是廉价的工业感、商业感，U3000UQ电脑代表的是一种刻意的高级感，那么MacBook Air代表的就是一种温润如玉的华丽感，用某位知名前游戏综艺UP主的话来说，就是低调奢华。&lt;/p&gt; &lt;div class=&quot;post-img&quot;&gt; &lt;a href=&quot;/assets/img/in-post/post-macbook/old-laptops.png&quot; data-fancybox=&quot;gallery&quot; data-caption=&quot;Thinkbook 14 Gen 2 &amp;amp; U3000UQ&quot; data-path=&quot;post-macbook/old-laptops.png&quot; data-webpack=&quot;true&quot;&gt;&lt;/a&gt;&lt;em&gt;Thinkbook 14 Gen 2 &amp;amp; U3000UQ&lt;/em&gt;&lt;/div&gt; &lt;p&gt;Thinkbook的设计语言偏于硬朗，外壳棱角分明，四角接近直角，屏幕较厚。C面塑料，导致刚性不足，轻轻抬起左侧机身就会弯折；触摸板四周缝隙大，没有CNC切边处理，廉价感是这款机型的代名词。华硕U3000UQ则几乎是在模仿Apple的设计语言，使用圆弧作为机身的大部分过渡手段，磨砂全金属外壳，试图营造一种高端商务范。但事实上，在细节上，华硕远不能做到Apple的水平，A面的拉丝工艺割手感足足，磨砂机身达不到苹果的细腻，底部的音响开孔没有使用CNC工艺，显得极不平整。可远观，不可近品。&lt;/p&gt; &lt;h3 id=&quot;macbook&quot;&gt;MacBook&lt;/h3&gt; &lt;p&gt;相较之下，Apple MacBook虽然仍然使用旧模具，却拥有着一种无可匹敌的吸引力。机身致密的磨砂与四边细腻的抛光，边缘使用CNC工艺，轻抚，如同在抚摸一块35摄氏度的黄铜，温润，没有一点割手感。上下两面都有弧度，却比U3000UQ弧度更大，更自然，很巧妙地降低了视觉厚度，在看过MacBook的屏幕一面之后，只会觉得Thinkbook那块4mm厚的屏幕非常沉重，远不及MacBook的轻盈感。&lt;/p&gt; &lt;h2 id=&quot;hardware-interface&quot;&gt;Hardware Interface&lt;/h2&gt; &lt;h3 id=&quot;屏幕&quot;&gt;屏幕&lt;/h3&gt; &lt;p&gt;屏幕是电脑的眼。此前的两台电脑都是1080P，颗粒感较为明显，尤其是Thinkbook还是一块抹布屏，让人难以接受。M1 MacBook Air这次使用的是过去Pro才拥有的400nits亮度DCI-P3色域屏，分辨率更是较我此前的设备提升到了2K。显示效果非常细腻，使用感受非常好。&lt;/p&gt; &lt;h3 id=&quot;音响&quot;&gt;音响&lt;/h3&gt; &lt;p&gt;目明，亦须耳聪。这台Air的音响系统是我听过的最好的。第一次打开Apple Music外放音乐，我激动万分，因为Air的音响真的给了我一种身临其境的感觉。由于发声设备在C面，使用内建的音响时环绕声效果非常强烈，声音层次很清晰，不是单纯的吵闹。&lt;/p&gt; &lt;p&gt;虽然可能不如M1 MacBook Pro，不过对我来说，我的这台MBA，已经让我体验到了物超所值的舒适音效，让我在家时不再需要带上耳机欣赏音乐。&lt;/p&gt; &lt;p&gt;除却在家，今后用到这对音响的机会应该不多，不过，老规矩，我可以不用，你不能没有。&lt;/p&gt; &lt;h3 id=&quot;摄像系统&quot;&gt;摄像系统&lt;/h3&gt; &lt;p&gt;AI？人工智能？或许这些技术已经被用到了手机摄像系统中。不过，电脑摄像头使用这些技术来提升音像质量，还是头一回听说。MBA的这颗摄像头令我又惊又喜，因为自从我用上了这台MBA和我老婆打视频电话，她每隔两分钟就要夸我白嫩。确实，我自个从屏幕里看到的自己也是气色红润，噪点压制得力。&lt;/p&gt; &lt;p&gt;再也不用MIX3打网络电话了，MIX3的前置补光灯在微信电话里根本就打不开！&lt;/p&gt; &lt;h3 id=&quot;触摸板&quot;&gt;触摸板&lt;/h3&gt; &lt;p&gt;Thinkbook的触控板在干手的触摸下还算柔和，但只要手上沾水出汗，便立马变得干涩，难以滑动。而年老的U3000UQ则更是在手上有水时指针乱跳，无法使用。MacBook的触控板却没有这一问题，就算手上有水，也一样能够流畅地滑动；并且得益于其玻璃覆面，手感温润，仿佛在抚摸一块玉石。&lt;/p&gt; &lt;p&gt;虽说有些老生常谈，不过以下的这些优点也一下就“抓住”了我的手：&lt;/p&gt; &lt;ol&gt; &lt;li&gt;面积巨大，非常方便滑行与拖拽。&lt;/li&gt; &lt;li&gt;四周严丝合缝，既没有四周缝隙，也没有普通Windows笔记本左右键一侧的下陷。&lt;/li&gt; &lt;li&gt;虽然无法像Windows一样轻触拖拽，松手放开，但由于全面板可按压，我已经习惯了点按时直接按下面板，甚至回到我的华硕本本上还意犹未尽，完全忘记了可以Tap &amp;amp; Drag。&lt;/li&gt; &lt;/ol&gt; &lt;p&gt;Apple所大力推荐的Haptic Feedback与Force Touch，无感。不过，瑕不掩瑜，这块触摸板让我完全放弃了鼠标，2560 x 1600个像素点，尽在我的大拇指尖。&lt;/p&gt; &lt;h3 id=&quot;键盘&quot;&gt;键盘&lt;/h3&gt; &lt;p&gt;听说MacBook惯用的蝴蝶键盘经过多年的迭代也仅仅是勉强可用。&lt;/p&gt; &lt;p&gt;但2020年，剪刀脚键盘，轻装上阵。MacBook的这张键盘打破了我的惟键程论，虽然键程相较Thinkbook确实短一些，但回弹力度足够，凹陷的键帽更加贴合手指，打字还是比较舒服的。摸过老婆覆了膜的同款键盘，加上了TPU键盘膜确实回弹体验稍差，一时间不知道是不是该继续裸奔下去。&lt;/p&gt; &lt;p&gt;除了回弹，键盘背光非常温柔。每一颗键帽单独的LED确实让键盘的背光更加均匀，更有安全感。&lt;/p&gt; &lt;div class=&quot;post-img&quot;&gt; &lt;a href=&quot;/assets/img/in-post/post-macbook/keys.jpg&quot; data-fancybox=&quot;gallery&quot; data-caption=&quot;Keyboard Backlight&quot; data-path=&quot;post-macbook/keys.jpg&quot; data-webpack=&quot;true&quot;&gt;&lt;/a&gt;&lt;em&gt;Keyboard Backlight&lt;/em&gt;&lt;/div&gt; &lt;p&gt;但有一点令人不解的是&lt;a href=&quot;https://www.zhihu.com/question/338779279&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;中英文切换键时常失灵&lt;/a&gt;，从拼音切换到英文后，再按下&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;中/英&lt;/code&gt;切换键，偶尔会发现没有反应，偶尔又会出现无法切换，大写灯亮起的情况。Born to be imperfect?&lt;/p&gt; &lt;h3 id=&quot;铰链&quot;&gt;铰链&lt;/h3&gt; &lt;p&gt;Thinkbook的铰链非常紧，需要双手开合。U3000UQ的铰链可以单手开合，却显得紧涩。最后还是MacBook让我真正体验到了“万元机的铰链”。手扣住凹槽，屏幕与底座有磁铁吸附，稍微用力，屏幕打开，磁力随着距离的增加渐渐卸了劲儿。继续推动屏幕，底座稳若泰山，屏幕却好像是浇了黄油般滑开了，阻尼均匀，令我爱不释手。&lt;/p&gt; &lt;h2 id=&quot;software-interface---macos&quot;&gt;Software Interface - macOS&lt;/h2&gt; &lt;p&gt;macOS给人的感觉就是&lt;strong&gt;温度&lt;/strong&gt;。&lt;/p&gt; &lt;h3 id=&quot;动效&quot;&gt;动效&lt;/h3&gt; &lt;p&gt;我的辣爸Joy过去一直试图在Linux上找到漂亮的系统级动画，不料macOS早就已经将其内化。我过去常用的Manjaro+Gnome打开Launcher的动画是卡顿的，开启关闭应用则没有动画。相较之下，macOS打开应用时图标的跳动在与我的焦急共情；关闭时的收缩仿佛在告诉我，它暂时折起，随时等待。这种动效给人一种轻松地与计算机交流的感觉。这在Windows/Gnome上体验不到，在Sway这样追求效率的WM上更不可能存在。&lt;/p&gt; &lt;h3 id=&quot;安全&quot;&gt;安全&lt;/h3&gt; &lt;div class=&quot;post-img&quot;&gt; &lt;a href=&quot;/assets/img/in-post/post-macbook/security.png&quot; data-fancybox=&quot;gallery&quot; data-caption=&quot;Securing My Laptop&quot; data-path=&quot;post-macbook/security.png&quot; data-webpack=&quot;true&quot;&gt;&lt;/a&gt;&lt;em&gt;Securing My Laptop&lt;/em&gt;&lt;/div&gt; &lt;p&gt;macOS一直在试图保障我的安全。无论我运行什么程序，它都会检测这些程序是否是由可信的开发者制作发行的。如果不是，那么只能用上Ctrl+Open强制打开，表示自愿接受风险。相比之下，Windows只会阻止它认为危险的程序，macOS显得更加保守。&lt;/p&gt; &lt;h3 id=&quot;记得我老婆&quot;&gt;记得我老婆&lt;/h3&gt; &lt;p&gt;最让我感到感动的是Siri，她记得了谁是我老婆。&lt;/p&gt; &lt;p&gt;不知怎的想到要跟这个Artificial Intelligence提一嘴Wang Wenrou是我的老婆，Siri居然回答我，设置好自己的联系人之后就可以设置老婆的卡片了。我依样画葫芦，设置好老婆的名片，对着Siri说“FaceTime my girlfriend”，FaceTime弹出了窗口，熟悉的拨号的“嘟嘟”声在我的小房间里响起……&lt;/p&gt; &lt;div class=&quot;post-img&quot;&gt; &lt;a href=&quot;/assets/img/in-post/post-macbook/siri.png&quot; data-fancybox=&quot;gallery&quot; data-caption=&quot;Remembering My Girl&quot; data-path=&quot;post-macbook/siri.png&quot; data-webpack=&quot;true&quot;&gt;&lt;/a&gt;&lt;em&gt;Remembering My Girl&lt;/em&gt;&lt;/div&gt; &lt;p&gt;Siri记住了我宝贝老婆的名字，书前（指Mac&lt;strong&gt;Book&lt;/strong&gt;），月下（指卤素&lt;strong&gt;灯&lt;/strong&gt;），泪落。&lt;/p&gt; &lt;h3 id=&quot;缺点&quot;&gt;缺点&lt;/h3&gt; &lt;p&gt;macOS是人情味的，却也是固执的。它不愿意支持NTFS的硬盘读写，在M1 MacBook上，甚至连&lt;a href=&quot;https://discussions.apple.com/thread/252114297&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;读取都存在困难&lt;/a&gt;（当然我希望这只是Big Sur的锅）。它无法完美地支持老旧的1080P显示器，在我的老优派上显得不够锐利（虽说这情有可原）。它不够自由，不像Unix一样可以通过&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.desktop&lt;/code&gt;随意执行命令，通过&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;systemctl&lt;/code&gt;任意添加后台Daemon（这也极有可能是因为我没有熟练地掌握macOS）。&lt;/p&gt; &lt;p&gt;与此同时，家中老旧的2.4GHz鼠标悉数不能使用，为了体验Minecraft只得翻出一只Joy珍藏的有线光电鼠标来（谢天谢地，轨迹球没有库存了）。&lt;/p&gt; &lt;p&gt;不过总的来说，瑕不掩瑜。&lt;/p&gt; &lt;h2 id=&quot;折腾&quot;&gt;折腾&lt;/h2&gt; &lt;p&gt;ARM64架构对于Windows来说还是Experiment，对于macOS来说是Experimental。总有些应用还不能直接一键安装运行，例如Ruby、Minecraft、KDEConnect等等。&lt;/p&gt; &lt;p&gt;但这台电脑给了我平庸的寒假生活无穷的乐趣，因为&lt;strong&gt;折腾&lt;/strong&gt;，既是Original Sin，又是Original Rejoice。&lt;/p&gt; &lt;div class=&quot;post-img d-inline-block&quot;&gt; &lt;a href=&quot;/assets/img/in-post/post-macbook/sleep.png&quot; data-fancybox=&quot;gallery&quot; data-caption=&quot;拿到电脑前&quot; data-path=&quot;post-macbook/sleep.png&quot; data-webpack=&quot;true&quot;&gt;&lt;/a&gt;&lt;em&gt;拿到电脑前&lt;/em&gt;&lt;/div&gt; &lt;div class=&quot;post-img d-inline-block&quot;&gt; &lt;a href=&quot;/assets/img/in-post/post-macbook/unsleep.png&quot; data-fancybox=&quot;gallery&quot; data-caption=&quot;拿到电脑后&quot; data-path=&quot;post-macbook/unsleep.png&quot; data-webpack=&quot;true&quot;&gt;&lt;/a&gt;&lt;em&gt;拿到电脑后&lt;/em&gt;&lt;/div&gt; &lt;h2 id=&quot;总结&quot;&gt;总结&lt;/h2&gt; &lt;p&gt;MacBook Air真的是一款让我心花怒放的电脑。因为他不像一台Windows电脑一样只是一件工具，只消拿来主义地使用即可；MacBook，让我感觉到它真正地在吸引我，去放弃老旧设备，把事情迁移到MacBook上来做——因为它能做的更好，无论是文档处理、浏览网页还是视频通话。并且更重要的是，我感觉到了macOS的温度，我确信，这是一支难以割舍的User-Oriented的操作系统。&lt;/p&gt; &lt;p&gt;的确，M1 MacBook还有很多适配的问题，但它们大多都可以通过折腾解决，而折腾，恰恰是生活中最自然、最美好的事情，不是吗。&lt;/p&gt;</content><author><name>DotIN13</name></author><category term="Apple Silicon"/><category term="MacBook"/><category term="Rbenv"/><category term="Ruby"/><category term="Homebrew"/><summary type="html">今情人佳节，谨以此文献余妻王氏。</summary></entry><entry><title type="html">如何优雅地在OpenWrt使用UU加速器</title><link href="https://www.wannaexpresso.com/2021/02/02/uu-openwrt/" rel="alternate" type="text/html" title="如何优雅地在OpenWrt使用UU加速器"/><published>2021-02-02T00:00:00+08:00</published><updated>2021-02-02T00:00:00+08:00</updated><id>https://www.wannaexpresso.com/2021/02/02/uu-openwrt</id><content type="html" xml:base="https://www.wannaexpresso.com/2021/02/02/uu-openwrt/">&lt;h2 id=&quot;uu加速器openwrt插件&quot;&gt;UU加速器OpenWrt插件&lt;/h2&gt; &lt;p&gt;家中购买酷安人均的斐讯K2P已有多时，原先刷入了OpenWrt系统用于加速上网，后来不怎的稳定，于是作罢，就仅仅做个拨号+AP。&lt;/p&gt; &lt;p&gt;后来添置Switch，意欲安装UU加速器插件为舞力全开作嫁衣，却无奈网易官方只支持梅林、华硕固件，便又作罢。&lt;/p&gt; &lt;p&gt;没想到，前几日网上冲浪，竟发现UU加速器已经有了OpenWrt的插件，&lt;a href=&quot;https://router.uu.163.com/app/baike/public/5f963c9304c215e129ca40e8.html&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;官方教程&lt;/a&gt;于2020年12月26日更新。按奈不住，立马依照教程上手操作，遇到一些小挫折，却也算是山重水复疑无路，柳暗花明又一村。&lt;/p&gt; &lt;h2 id=&quot;操作路由器&quot;&gt;操作路由器&lt;/h2&gt; &lt;h3 id=&quot;连接路由器&quot;&gt;连接路由器&lt;/h3&gt; &lt;p&gt;首先自然是ssh连接路由器，由于光猫占据了&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.1.1&lt;/code&gt;的IP地址，我家的K2P便只得屈居&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.2.1&lt;/code&gt;了。&lt;/p&gt; &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ssh root@192.168.2.1 &lt;span class=&quot;c&quot;&gt;# root是路由器管理界面登陆时的用户名&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# 192.168.2.1便是网关地址，因人而异，linux系统用ip addr命令，windows用ipconfig命令确定&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# 回车后要求输入密码，也就是路由器管理页面登陆时的密码&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h3 id=&quot;安装加速器插件&quot;&gt;安装加速器插件&lt;/h3&gt; &lt;p&gt;加速器插件安装相当简单，官方提供了脚本自动安装。首先，下载安装脚本到当前目录。&lt;/p&gt; &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;wget http://uu.gdl.netease.com/uuplugin-script/202010221713/install.sh &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; install.sh &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;然后直接运行脚本。&lt;/p&gt; &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/bin/sh install.sh openwrt &lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;uname&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# Output:&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# sn=xx:xx:xx:xx&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h3 id=&quot;安装kmod-tun&quot;&gt;安装kmod-tun&lt;/h3&gt; &lt;h4 id=&quot;opkg换源&quot;&gt;Opkg换源&lt;/h4&gt; &lt;p&gt;首先更新包管理器目录。我的OpenWrt是20.4.8的预览版本，使用Snapshots包，在用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;opkg update&lt;/code&gt;命令更新包列表时非常慢，因为官方源在国外。&lt;/p&gt; &lt;p&gt;转了一圈却发现&lt;a href=&quot;https://mirrors.tuna.tsinghua.edu.cn/openwrt/snapshots/targets/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;清华的Snapshots源&lt;/a&gt;404错误，&lt;a href=&quot;https://mirror.sjtu.edu.cn/openwrt/snapshots/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;交大源&lt;/a&gt;没有同步Snapshots包，&lt;a href=&quot;http://mirrors.ustc.edu.cn/openwrt/snapshots/targets/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;中科大的镜像网站&lt;/a&gt;居然没有自动HTTPS，导致无法打开，手动把地址改成HTTPS之后总算打开了。&lt;/p&gt; &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# 方法一，一条命令换源&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;sed&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'s_downloads.openwrt.org_openwrt.proxy.ustclug.org_'&lt;/span&gt; /etc/opkg/distfeeds.conf &lt;span class=&quot;c&quot;&gt;# 方法二，手动修改/etc/opkg/distfeeds.conf为如下内容&lt;/span&gt; src/gz openwrt_core https://openwrt.proxy.ustclug.org/snapshots/targets/ramips/mt7621/packages src/gz openwrt_base https://openwrt.proxy.ustclug.org/snapshots/packages/mipsel_24kc/base src/gz openwrt_luci https://openwrt.proxy.ustclug.org/snapshots/packages/mipsel_24kc/luci src/gz openwrt_packages https://openwrt.proxy.ustclug.org/snapshots/packages/mipsel_24kc/packages src/gz openwrt_routing https://openwrt.proxy.ustclug.org/snapshots/packages/mipsel_24kc/routing &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;换源后运行更新命令更新包列表。&lt;/p&gt; &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;opkg update &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h4 id=&quot;安装kmod-tun-1&quot;&gt;安装kmod-tun&lt;/h4&gt; &lt;p&gt;我的OpenWrt内核版本已经老旧，仍然在运行4.4版本的linux内核。因此运行&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;opkg install kmod-tun&lt;/code&gt;安装kmod-tun时提示内核版本过旧。&lt;/p&gt; &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Collected errors: satisfy_dependencies_for: Cannot satisfy the following dependencies &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;kmod-tun: kernel &lt;span class=&quot;o&quot;&gt;(=&lt;/span&gt; 5.4.xx.x - xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;搜索OpenWrt论坛了解到，可以通过强制安装指令越过内核版本检测。&lt;/p&gt; &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;opkg &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--force-depends&lt;/span&gt; kmod-tun &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;成功安装kmod-tun。&lt;/p&gt; &lt;h3 id=&quot;操作手机&quot;&gt;操作手机&lt;/h3&gt; &lt;p&gt;加速仍旧在手机端控制，需要下载UU加速器主机版的手机APP。&lt;/p&gt; &lt;div class=&quot;post-img&quot;&gt; &lt;a href=&quot;/assets/img/in-post/post-uu/download.png&quot; data-fancybox=&quot;gallery&quot; data-caption=&quot;下载链接&quot; data-path=&quot;post-uu/download.png&quot; data-webpack=&quot;true&quot;&gt;&lt;/a&gt;&lt;em&gt;下载链接&lt;/em&gt;&lt;/div&gt; &lt;p&gt;通过上面的QR或者&lt;a href=&quot;https://adl.netease.com/d/g/uu/c/uu_router?from=qr&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;下载链接&lt;/a&gt;下载安装后，按照提示连接路由器。&lt;/p&gt; &lt;div class=&quot;post-img&quot;&gt; &lt;a href=&quot;/assets/img/in-post/post-uu/img-app-screenshot-OpenWrt.jpg&quot; data-fancybox=&quot;gallery&quot; data-caption=&quot;进入APP连接到路由器&quot; data-path=&quot;post-uu/img-app-screenshot-OpenWrt.jpg&quot; data-webpack=&quot;true&quot;&gt;&lt;/a&gt;&lt;em&gt;进入APP连接到路由器&lt;/em&gt;&lt;/div&gt; &lt;p&gt;连接之后，将Switch连接到路由器的无线网络，在APP中找到Switch，选择游戏就可以加速了。&lt;/p&gt; &lt;p&gt;似乎有些许不稳定，群魔乱舞2020舞至第二首便掉线，只得重连。OpenWrt的插件还亟待长期的测试，不过群魔乱舞的年卡与UU加速器的年卡也实非小数目，拟至寒假过后依着实际的体验与需求再做打算。&lt;/p&gt;</content><author><name>DotIN13</name></author><category term="UU Router"/><category term="OpenWrt"/><summary type="html">UU加速器OpenWrt插件</summary></entry><entry><title type="html">法律门前</title><link href="https://www.wannaexpresso.com/2020/11/02/before-the-law/" rel="alternate" type="text/html" title="法律门前"/><published>2020-11-02T00:00:00+08:00</published><updated>2020-11-02T00:00:00+08:00</updated><id>https://www.wannaexpresso.com/2020/11/02/before-the-law</id><content type="html" xml:base="https://www.wannaexpresso.com/2020/11/02/before-the-law/">&lt;h2 id=&quot;法律门前&quot;&gt;法律门前&lt;/h2&gt; &lt;blockquote&gt; &lt;p&gt;卡夫卡 著 / 杨武能 译&lt;/p&gt; &lt;/blockquote&gt; &lt;p&gt;法律门前站着一名卫士。一天来了个乡下人，请求卫士放他进法律的门里去。可是卫士回答说，他现在不能允许他这样做，乡下人考虑了一下又问： 他等一等是否可以进去呢?&lt;/p&gt; &lt;p&gt;“有可能，”卫士回答，“但现在不成。”&lt;/p&gt; &lt;p&gt;由于法律的大门始终都敞开着，这当儿卫士又退到一边去了，乡下人便弯着腰，往门里瞧。卫士发现了大笑道：“要是你很想进去，就不妨试试，把我的禁止当耳旁风好了。不过得记住： 我可是很厉害的。再说我还仅仅是最低一级的卫士哩。从一座厅堂到另一座厅堂，每一道门面前都站着一个卫士，而且一个比一个厉害。就说第三座厅堂前那位吧，连我都不敢正眼瞧他呐。”&lt;/p&gt; &lt;p&gt;乡下人没料到会碰见这么多困难，人家可是说法律之门人人都可以进，随时都可以进啊，他想。不过，当他现在仔细打量过那位穿皮大衣的卫士，看了看他那又大又尖的鼻子，又长又密又黑的鞑靼人似的胡须以后，他觉得还是等一等，到人家允许他进去时再进去好些。卫士给他一只小矮凳，让他坐在大门旁边。他于是便坐在那儿，日复一日，年复一年。其间他做过多次尝试，请求人家放他进去，搞得卫士也厌烦起来。时不时地，卫士向他提出些简短的询问，问他的家乡和其它许多情况；不过，这都是些那类大人物提的不关痛痒的问题，临了儿卫士还是对他讲，他还不能放他进去。乡下人为旅行到这儿来原来是准备了许多东西的，如今可全都花光了；为了讨好卫士，花再多也该啊。那位尽管什么都收了，却对他讲：“我收的目的，仅仅是使你别以为自己有什么礼数不周到。”&lt;/p&gt; &lt;p&gt;许多年来，乡下人差不多一直不停地观察着这个卫士。他把其他卫士全给忘了；对于他来说，这第一个卫士似乎就是进入法律殿堂的唯一障碍。他诅咒自己机会碰得不巧，头几年还骂得大声大气，毫无顾忌，到后来人老了， 就只能够独自嘟嘟嚷嚷几句。 他甚至变得孩子气起来;在对卫士的多年观察中，他发现这位老兄的大衣毛领里藏着跳蚤，于是也请跳蚤帮助他使那位卫士改变主意。终于，他老眼昏花了：但自己却闹不清楚究竟是周围真的变黑了呢，或者仅仅是眼睛在欺骗他。不过，这当儿在黑暗中，他却清清楚楚看见一道亮光，一道从法律之门中进射出来的不灭的星光。此刻他已经生命垂危。弥留之际，他在这整个过程中的经验一下子全涌进脑海，凝集成一个迄今他还不曾向卫士提过的问题。他向卫士招了招手，他的身体正在慢慢僵硬，再也站不起来了。卫士不得不向他俯下身子；他俩高矮差已变得对他大大不利。&lt;/p&gt; &lt;p&gt;“事已至此，你还想知道什么？”卫士问，“你这个人真不知足。”&lt;/p&gt; &lt;p&gt;“不是所有的人都向往法律么，”乡下人说，“可怎么在这许多年间，除去我以外就没见有任何人来要求进去呢？”&lt;/p&gt; &lt;p&gt;卫士看出乡下人已死到临头，为了让他那听力渐渐消失的耳朵能听清楚，便冲他大声吼道：“这道门任何别的人都不得进入；因为它是专为你设下的。现在我可以去把它关起来了。”&lt;/p&gt;</content><author><name>Franz Kafka</name></author><category term="卡夫卡"/><category term="Jurisprudence"/><category term="Kafka"/><summary type="html">法律门前</summary></entry><entry><title type="html">主人</title><link href="https://www.wannaexpresso.com/2020/10/09/host-story/" rel="alternate" type="text/html" title="主人"/><published>2020-10-09T00:00:00+08:00</published><updated>2020-10-09T00:00:00+08:00</updated><id>https://www.wannaexpresso.com/2020/10/09/host-story</id><content type="html" xml:base="https://www.wannaexpresso.com/2020/10/09/host-story/">&lt;p&gt;“片儿川”这家酒楼属当地一绝。&lt;/p&gt; &lt;p&gt;不过晚上六点，厅堂里已坐满了慕名而来的食客，二楼的雅座也多半缀上了灯火。&lt;/p&gt; &lt;p&gt;叶子和他大哥已经在风里立了有十数分钟了——先前托她在城里上工的大舅子订的座，在前台那本密密麻麻写满了名字的白本子上却怎么也找不到一个“叶”字——没想到第一次上城吃饭就吃上了个闭门羹。依着店员的说法，他们还得再等上两三桌客人才能挨上座。大哥不知从哪翻出一张报来，喃喃地念着，不过叶子对报纸上的事儿丝毫不关心，右手扒着玻璃外墙，讷讷地向店里头张望眼。炸得金黄金黄的春卷，热腾腾冒着蒸气的江肴肉，甜丝丝的酒酿圆子，一道道好小菜的香气几乎要穿过玻璃钻进叶子的鼻子里。&lt;/p&gt; &lt;p&gt;“肆拾玖号，里边请。”叶子耳尖，听得店员喊号，立马戳了戳身边的大哥，“是不是到咱了？”&lt;/p&gt; &lt;p&gt;在厅柱边的座子落座，叶子便觉着心里少了些什么，先前那股挠心劲儿渐地消了。服务员拿来菜单，叶子翻开草草看了几眼便推给了桌对面的大哥，大哥嗔怪地摇了摇头。&lt;/p&gt; &lt;p&gt;叶子开始撇过头去打量邻座的客人，是父亲带着一个小女孩，年龄与叶子相仿。父亲毫不掩饰地露着个光脑袋，让叶子心里不知怎的有些想笑，父亲的墨镜收着脚架放在桌沿。这对父女应当是已点过了菜，正呆呆对望着等上菜呢。&lt;/p&gt; &lt;p&gt;趁着这当儿，大哥已点好了菜，招呼服务员过来，轻声耳语：“给咱早些上泡饭，多谢”。就着粥汤吃菜是叶子家的老传统了。&lt;/p&gt; &lt;p&gt;玻璃门“吱呀”一声启开，门开得不大，却刚好够那个身着绿色镶金旗袍，戴着银耳饰，拎着小皮包的阿姨挤身入内。阿姨一进门便目不斜视，径直朝叶子右手边那空桌走去。&lt;/p&gt; &lt;p&gt;“姑娘，给我上个茶”，她显然是在招呼一旁尚在整理碗碟的服务员。见那服务员要给她捎上一份菜单，她又不紧不慢地补上一句，“用不着菜单，这儿的菜名我都背得出”。叶子心里佩服，自己才第一次来，这位阿姨竟已是常客了。&lt;/p&gt; &lt;p&gt;“给我来个白斩鸡，再来个生菜……”&lt;/p&gt; &lt;p&gt;“我们这没有生菜。”&lt;/p&gt; &lt;p&gt;“怎么可能，我上次刚来吃过。”&lt;/p&gt; &lt;p&gt;服务员一拍脑袋，“哦，清炒时蔬有。”&lt;/p&gt; &lt;p&gt;“清炒什么？”&lt;/p&gt; &lt;p&gt;“清——炒——时——蔬——，就是杭白菜，”服务员出奇的耐心。&lt;/p&gt; &lt;p&gt;“哦，白菜是吧，可以可以，就这个。”&lt;/p&gt; &lt;p&gt;服务员笑着摇摇头，回身帮阿姨下单。那姑娘还未走开，阿姨就回过头去气鼓鼓地招手道，“喂，姑娘，这杯水是不是上个客人喝剩下的？”&lt;/p&gt; &lt;p&gt;“怎么可能给你喝过的水！”服务员显然觉得阿姨有些胡闹。&lt;/p&gt; &lt;p&gt;“我没看到你给我倒水。”&lt;/p&gt; &lt;p&gt;“你不相信你问旁边的客人啊。”&lt;/p&gt; &lt;p&gt;叶子并没有注意那杯水所来何时，心里想为姑娘解说，却一时说不出话来。不过阿姨似乎也被这句话镇住了，那姑娘乘胜追击道，“给你用过的杯子我可是要丢饭碗的，不要乱讲啊阿姨。”&lt;/p&gt; &lt;p&gt;“哦哦，没乱讲没乱讲，我大概是没注意到。”阿姨几乎是自觉无趣，喃喃地转过身去，伸手拿起杯子抿了一口，自顾自地点了点头，仿佛是什么东西得到了确证。&lt;/p&gt; &lt;p&gt;这么一来一回，叶子和边上父女这两桌的菜也来了。服务员姑娘先是给父女俩端去了一盘煎饺，又给叶子他们桌上了一盆白斩鸡，和大哥点名要的海鲜泡饭。叶子欢欣鼓舞地拿起筷子，却不知先尝哪个好。大哥见状笑着伸过手来拿过叶子的碗，给她盛上半碗泡饭。&lt;/p&gt; &lt;p&gt;突然，左手边传来一声霹雳，“喂，服务员，比我们晚来的都上了泡饭，我们的怎么还没的上？”叶子心里一咯噔，略略扬眉瞥了眼大哥，见大哥边看报边喝粥，正吃得欢喜，便不作声，继续闷头舀粥吃。&lt;/p&gt; &lt;p&gt;“哎哎，不好意思，马上给您上。”服务员对那女孩的父亲招招手，意作抱歉。&lt;/p&gt; &lt;p&gt;不等服务员回过身去，右手边的阿姨又细声细气地嚷嚷起来，“我都饿得不行了，赶紧给我上个菜，随便哪个都行，白斩鸡、白菜，都可以，快一点呀。”服务员显得有些疲惫，但还是挂上笑点点头，“好嘞好嘞。”&lt;/p&gt; &lt;p&gt;叶子面前的白斩鸡尚未动过筷，好心的叶子甚至想把这盘端给阿姨，让她先填填肚子。不过转念又想到多半会被阿姨拒绝，这股子冲动劲儿又给压了下去。&lt;/p&gt; &lt;p&gt;醋溜虾仁、蟹黄小笼……不知上了几道菜，叶子都没细数，她心里此时还想着左边的“朋友”什么时候能吃上泡饭，右边的“朋友”什么时候能吃上白斩鸡。&lt;/p&gt; &lt;p&gt;令她欢欣鼓舞的是，又不多一会，父女俩也吃上了海鲜泡饭，不过右边阿姨的桌上依旧空空荡荡。阿姨自顾自地喝着茶，目光斜斜地望着窗外的街灯，似是懒得和服务员理论了。叶子的心里不是滋味儿，阿姨本是老食客，店里也不多担待，竟将她晾在这儿，哪里算得上尽得地主之宜。&lt;/p&gt; &lt;p&gt;“来了来了，阿姨！”服务员姑娘清脆的声音如同细雨般打醒了尚在思虑中的叶子。姑娘端了一大盘子来，有白斩鸡、白米饭、炒白菜。咦，还有一碟煎饺子！“这碟饺子是补偿您的，真不好意思，害您等了这么久。”服务员的面上洋溢着发自内心的笑，引得阿姨也解开了紧缩的眉，咯咯地笑起来，“没事没事，谢谢啊。”叶子心里说不出的喜，不觉又有了食欲。&lt;/p&gt; &lt;p&gt;“这菜不是上过了吗，”一旁的父亲仰头看着另一个服务员小哥，指着小哥手里的煎饺。“这碟也是补给您的，方才的泡饭上的实在太晚了。”叶子“哧溜”咬下一只小笼，馅儿还是原来的肉馅儿，汤儿还是原来的汤汁儿，却不知怎的，暖融融、甜津津的。&lt;/p&gt; &lt;div style=&quot;text-align: right;&quot;&gt;2020年10月9日于復旦&lt;/div&gt;</content><author><name>DotIN13</name></author><category term="Life"/><category term="Short Story"/><summary type="html">“片儿川”这家酒楼属当地一绝。</summary></entry><entry><title type="html">道德之于法律的目的</title><link href="https://www.wannaexpresso.com/2020/10/03/morality-in-law/" rel="alternate" type="text/html" title="道德之于法律的目的"/><published>2020-10-03T00:00:00+08:00</published><updated>2020-10-03T00:00:00+08:00</updated><id>https://www.wannaexpresso.com/2020/10/03/morality-in-law</id><content type="html" xml:base="https://www.wannaexpresso.com/2020/10/03/morality-in-law/">&lt;h2 id=&quot;法律&quot;&gt;法律&lt;/h2&gt; &lt;p&gt;法理学的导论课程指出，法律调整的对象是&lt;strong&gt;行为&lt;/strong&gt;和&lt;strong&gt;行为关系&lt;/strong&gt;。&lt;/p&gt; &lt;blockquote&gt; &lt;p&gt;行为关系：通过人的行为而发生的社会关系。&lt;/p&gt; &lt;/blockquote&gt; &lt;p&gt;马克思在《评普鲁士最近的书报检查令》中谈到，“对于法律来说，除了我的行为以外，我是根本不存在的，我根本不是法律的对象”。直接地说，只有实施了一定行为，且该行为符合法律规定的构成要件，才能得到法律的调整。也就是说，单纯的思想、内心活动或是有关一个人道德优劣的社会评价并不构成法律的调整对象。&lt;/p&gt; &lt;h2 id=&quot;道德之于法律&quot;&gt;道德之于法律&lt;/h2&gt; &lt;p&gt;但事实上，在实际操作层面，法律似乎并不能完全离开道德、或者说人的一般心理活动。&lt;/p&gt; &lt;p&gt;在法律制定的过程中，社会一般道德价值就会被纳入到法律体系中，这一点在中国这样借鉴、移植西方法律系统的国家不甚明显，但在西方国家尤其值得注意，绝大多数受到正面鼓励的行为都符合社会道德的基本范式，而受到负面的惩罚的行为基本上都违背了一般的道德价值。法律并非凭空捏造，在其订制过程中，传统、文化、意识形态、一般道德原则都会在潜移默化中影响制定者的落笔。的确，在严谨的法律条文中我们很难看到对道德的判断，但事实上道德也作为了法律形成的重要原则与尺规，间接体现在法律调整行为的范式中。&lt;/p&gt; &lt;p&gt;相类似地，在法律施行过程中，也往往会遇到需要考察人的道德状态，我们常常会问，犯人的作案动机是什么，这事实上就是关注到了人的道德状态；另一个例子是故意和过失的区别，法律往往会对不同的道德状态下犯下的相同罪行（行动）做出不同的反馈。&lt;/p&gt; &lt;p&gt;最后，在现行法律不能维护社会道德与社会正义时，更多的法律实践正在将一般道德原则运用到审判与法律的编订中去。最为典型的例子就是纽伦堡审判与东京审判，当正义遭到侵蚀，现有法律却不能使其不能得到伸张时，国际社会选择了使用普遍道德的衡量来为彼时所谓无罪的行为定罪量刑。&lt;/p&gt; &lt;p&gt;可以说，道德不仅仅规范了法律的制定，更参与了法律的运行，更引导了法律的发展，从各个层面来说，道德与法律是不能够分离的。&lt;/p&gt; &lt;h2 id=&quot;道德之于法律的目的&quot;&gt;道德之于法律的目的&lt;/h2&gt; &lt;p&gt;法律的主要效力所依靠的是其背后的国家强制力，即暴力，即强迫他人做其不想做的事的能力。法律对人的主要影响方式包括积极的奖励，也包括负面的惩罚，通过这两种外力手段来达到&lt;em&gt;引导&lt;/em&gt;与&lt;em&gt;强化&lt;/em&gt;（Reinforcement）的作用，促使适用者以不违背法律的行为模式行动。&lt;/p&gt; &lt;p&gt;由于法律本身在制定过程中就融入了道德原则，因此在法律引导人的行为的过程中，其利导性在事实上促使着人向符合一般道德价值的方向发展——改变自己的行为模式。&lt;/p&gt; &lt;p&gt;我认为，法律虽然直接调整行为与行为关系，但最终法律调整的仍然是人的道德。法律的调整过程可以这样理解，首先法律将道德原则从社会的普遍意志中提取出来，并依据这些价值形成文本，去规训那些尚未接受这些道德价值的人。&lt;/p&gt; &lt;p&gt;一个简单的类比，大多数人都知道要把垃圾扔在垃圾桶里，一方便能够保护市容，另一方面可以促进合理处理与循环利用。一开始，市政厅会在城市各个角落里摆上垃圾桶，大家都会觉得将垃圾扔进垃圾桶是举手之劳，于是逐渐习惯了这一动作。此时，当市政厅决定加强垃圾分类，移除了大多数市内的垃圾桶时，几乎所有市民都已经养成了垃圾进桶的习惯，会将手中的垃圾留到遇到垃圾桶再扔，而不是随地乱扔。&lt;/p&gt; &lt;p&gt;这种道德规训的方式同样体现在法律中，甚至可以通过新闻媒体、网络的方式进行放大、夸大，以加强其教育、陶冶的作用，将一般道德规范上升到全体道德认同的层面。&lt;/p&gt; &lt;p&gt;实证法学派的代表人物哈特（H. L. A. Hart）曾指出，道德和法律是分离的。但他同样提出，可以允许道德对法律的指导，通过追溯法令、修订法律的方式来将道德的指导体现在法律体系中。即便道德与法律分离，他们同样紧密联系，并且道德始终指导法律的发展与进步，为人类进一步和谐、和平的发展做出贡献。&lt;/p&gt;</content><author><name>DotIN13</name></author><category term="Courses"/><category term="Jurisprudence"/><summary type="html">法律</summary></entry><entry><title type="html">再一次，学代会</title><link href="https://www.wannaexpresso.com/2020/09/29/another-election/" rel="alternate" type="text/html" title="再一次，学代会"/><published>2020-09-29T00:00:00+08:00</published><updated>2020-09-29T00:00:00+08:00</updated><id>https://www.wannaexpresso.com/2020/09/29/another-election</id><content type="html" xml:base="https://www.wannaexpresso.com/2020/09/29/another-election/">&lt;h2 id=&quot;没有名字的人&quot;&gt;没有名字的人&lt;/h2&gt; &lt;p&gt;平票。&lt;/p&gt; &lt;p&gt;她自若地起身，右手接过主持人递来的话筒。话音未启，一个没有名字的人不知从座席的哪里蹿了出来，没有人认识他，甚至他自己是否认识自己也尚无定论。几乎有些傲慢地，他一把夺过话筒，留下她和主持人呆呆地站在一旁，不知所措。整个会场中鸦雀无声，如同一张绷紧了的布，动不得丝毫。似乎是抱歉，他向所有的听众摆摆手。&lt;/p&gt; &lt;p&gt;潮湿的空气在话筒中穿过，发出嘶哑的声音。&lt;/p&gt; &lt;p&gt;“I was a dreamer.” 没有人知道他为什么要用听不懂的语言说话，以下忠实地记录了他全部的独白：&lt;/p&gt; &lt;p&gt;“I once had a dream to take every single person in this community seriously, to give everyone a voice, to allow everyone to join academic talks without shackles of inferiority or fear.&lt;/p&gt; &lt;p&gt;“I acknowledged that we should always value &lt;em&gt;People&lt;/em&gt;. And that is because we, the people, not one more, not one less, composes this community, this very community that we cherish. The communion with my friends and colleagues only firmed my belief that the community would be better off with such fundamental principles. People laughed, people cried, people awed, they aligned with me, for once.&lt;/p&gt; &lt;p&gt;“I tried so hard in pursuit of my own dream, this dream to value everyone as individuals unique and special. We even had a little team to put it into action.&lt;/p&gt; &lt;p&gt;“But there is only one problem. That is the grim fact that I am failing. Both mentally and physically.&lt;/p&gt; &lt;p&gt;“At first, I lost my voice when I ask teachers and scholars for participation in our events. I took it as a mere temporary malady. But days, weeks, months passed, things just got worse. I didn’t even have the guts to ask my best team to work alongside me. Orders no more, communion no more, words no more. I backed off, from what I believed so much in.&lt;/p&gt; &lt;p&gt;“I failed my dream, I failed myself, I failed you.&lt;/p&gt; &lt;p&gt;“But the woman standing right here did not.&lt;/p&gt; &lt;p&gt;“She was my successor, one much better. She was once a member of my team, a diligent one, not only diligent in learning procedures of work, but also in learning the ways of my dream. I didn’t gave her much, but she started to pick up where I left off, in a smarter way.&lt;/p&gt; &lt;p&gt;“Reading groups in a series, politics training camp. What I see is someone bringing my dream into reality in my place. People started to join, acquaint and love each other because of her. A community was rebuilt and renewed because of her.&lt;/p&gt; &lt;p&gt;“She talks less, but does more. She deserves your vote, my fellow students.”&lt;/p&gt; &lt;h2 id=&quot;幡然&quot;&gt;幡然&lt;/h2&gt; &lt;p&gt;旁边的老学长一把推醒了我，我猛地一激灵。&lt;/p&gt; &lt;p&gt;台上，她不紧不慢地补充着对自己的介绍，我瞟了一眼屏幕中的计票，她，领先。&lt;/p&gt;</content><author><name>DotIN13</name></author><category term="Life"/><summary type="html">没有名字的人</summary></entry><entry><title type="html">RoR开发日志五</title><link href="https://www.wannaexpresso.com/2020/09/01/rails-development-5/" rel="alternate" type="text/html" title="RoR开发日志五"/><published>2020-09-01T00:00:00+08:00</published><updated>2020-09-01T00:00:00+08:00</updated><id>https://www.wannaexpresso.com/2020/09/01/rails-development-5</id><content type="html" xml:base="https://www.wannaexpresso.com/2020/09/01/rails-development-5/">&lt;h2 id=&quot;development-must-go-on&quot;&gt;Development must go on…&lt;/h2&gt; &lt;p&gt;前几日观摩Web Dev，与会嘉宾口若悬河，称道自己两天内写了两千行代码，还故作谦虚，惊诧之余，暗暗感叹自己边学边写，速度实在有如龟行。一段代码，改了又改，改了又改，遇到难写处，我便喜欢起身倒水，一天能喝上十数杯。倒也不是企图从杯水中得些什么灵感，只不过是给自己僵住的大脑来上那么点distraction罢了。话虽然这么说，不断的refactoring确确实实相当痛苦，但最终看到自己的新设想得到实现，心中总有那么一点说不出的喜。&lt;/p&gt; &lt;p&gt;有时会对自己说，万一真的遇到我和我的老伙计——&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;StackOverflow&lt;/code&gt;都解决不了的问题该怎么办。说真的，我还确实没怎么想过这个问题，不过也许那时候，我还可以请教我的朋友，我还可以一遍一遍地去思索。有人说要用有限的生命去做无限的为人民服务，我倒是想说，我或许会用无限的时间去解决那么几个有限的问题，如果我告诉你这是勇于追寻真理，那么朋友，或许你应该点醒我：那是因为当下你有的，除了时间，还是时间。&lt;/p&gt; &lt;h2 id=&quot;全局logger&quot;&gt;全局Logger&lt;/h2&gt; &lt;p&gt;我正在制作的战斗系统包括战场、人员两大主要的对象，我的目标是在任何地方使用日志时，都能获取到同一个日志变量，并对战斗进行记录。似乎在类与类之间没法做到这一点，不过凑巧的是&lt;a href=&quot;https://stackoverflow.com/questions/917566/ruby-share-logger-instance-among-module-classes&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;StackOverflow&lt;/a&gt;上已经有了靠谱的解决方法——Module。&lt;/p&gt; &lt;p&gt;有趣之处在于，在将Module包含到Class中时，Instance methods会被加载到Class中，而Module中的Class methods（事实上并不存在Module methods，他们应该被叫做Class methods）仍然可以直接在Module上直接调用。&lt;/p&gt; &lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;Foo&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# Instance method of module Foo&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;method_a&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;a&quot;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# Class method of module Foo&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;method_b&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;b&quot;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Bar&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Foo&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;上面的例子中，运行以下代码会有如下的输出。&lt;/p&gt; &lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;irb&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;&lt;span class=&quot;mo&quot;&gt;001&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bar&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Bar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;irb&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;&lt;span class=&quot;mo&quot;&gt;002&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;method_a&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# =&amp;gt; a&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;irb&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;&lt;span class=&quot;mo&quot;&gt;003&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;method_b&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# =&amp;gt; undefined method `method_b' for #&amp;lt;Bar:0x000055ac39b5d020&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;irb&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;&lt;span class=&quot;mo&quot;&gt;004&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Bar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;method_b&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# =&amp;gt; undefined method `method_b' for #&amp;lt;Bar: Class&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;irb&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;&lt;span class=&quot;mo&quot;&gt;004&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Foo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;method_b&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# =&amp;gt; b&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;可见，Module中的Class Methods不会被添加到include该Module的Class中，仍然可以正常对Module调用，而这些Class Methods中的Class Variable也相应的可以留存在Module中，从而可以通过&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Module.accessor_method&lt;/code&gt;顺利地读写。如此以来，以下的写法就可以让我们在多个Class中用同样的方法来读写同一个变量了：&lt;/p&gt; &lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;Logging&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;logger&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Logging&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;logger&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;logger&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@logger&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Battlefield&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Logging&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Combatant&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Logging&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;如此一来，两个类中的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;#logger&lt;/code&gt;方法便都指向了&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Logging.logger&lt;/code&gt;，而后者正是Module Logging中的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;@logger&lt;/code&gt;。简单的说，我们可以在两个类中操作同一个&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;@logger&lt;/code&gt;了。&lt;/p&gt; &lt;p&gt;上面的代码还可以用&lt;a href=&quot;https://ruby-doc.org/core-2.7.1/doc/syntax/modules_and_classes_rdoc.html#label-Singleton+Classes&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Skeleton Class&lt;/a&gt;的写法&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;class &amp;lt;&amp;lt; self&lt;/code&gt;来改写：&lt;/p&gt; &lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;Logging&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# 相当于定义了self.logger与self.logger=两个accessor&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;attr_accessor&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:logger&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;logger&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Logging&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;logger&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;logger&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Logging&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;logger&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;这个办法不仅仅可以用来读写日志，在我的实践中，我还用他记录战斗的回合数，相信他还有更多的妙用，等你去发现。&lt;/p&gt; &lt;h2 id=&quot;控制器名称&quot;&gt;控制器名称&lt;/h2&gt; &lt;p&gt;我知道给View加上太多logic是不合理的，不过有的时候还是想这么干，比如只有在技能的View里才显示增益效果的表单。这时候可以读取resource的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;class.name&lt;/code&gt;，不过我还是做了做功课，看了看有没有更好的办法。&lt;/p&gt; &lt;p&gt;结果是，并没有，不过&lt;a href=&quot;https://stackoverflow.com/questions/3757491/can-i-get-the-name-of-the-current-controller-in-the-view&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;热心的网友&lt;/a&gt;告诉我，也可以用Controller的名称来辨别。&lt;/p&gt; &lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;controller&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;controller_name&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;controller.controller_name&lt;/code&gt;包含了当前控制器的名称，例如你的控制器叫&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SkillsController&lt;/code&gt;，那么这一方法的返回值就是字符串&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;skills&lt;/code&gt;。配合判断语句，可以在不用到resource的情况下判断当前View的位置。&lt;/p&gt; &lt;h2 id=&quot;custom-seeding&quot;&gt;Custom Seeding&lt;/h2&gt; &lt;p&gt;上次问我的攻城狮朋友，该怎么处理游戏的基础数据，例如升级所需经验、英雄属性的种类，他告诉我存数据库方便修改。一开始我并不确信，不过在几个月的实践之后，我发现似乎确实如此，当你想添加一个属性，一种技能类型的时候，如果你没有把他们存在一个地方，那么这一次refactoring将让你难忘至少半个月。&lt;/p&gt; &lt;p&gt;问题就在于，Development和Production并不共用数据库，这意味着我把基础数据存进开发数据库后，我还得手动到Production创建另一份，况且我把这些基础数据用来作了Enum，如果这些数据不存在，服务器甚至没法启动，这时候只能用Seed来代劳了。但Seed文件只能有&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;db/seeds.rb&lt;/code&gt;一个，想要分模块导入数据应该怎么做呢？&lt;/p&gt; &lt;p&gt;万能的&lt;a href=&quot;https://stackoverflow.com/questions/7130334/is-there-any-way-to-have-multiple-seeds-rb-files-any-kind-of-versioning-for-s&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Stacky&lt;/a&gt;告诉了我一个完美的方案，只消建立一个Rake task！&lt;/p&gt; &lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# lib/tasks/custom_seed.rake&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;namespace&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:db&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;namespace&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:seed&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Rails&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'db'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'seeds'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'*.rb'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;task_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;basename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'.rb'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;intern&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;task&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;task_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:environment&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;load&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;task&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:all&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:environment&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Rails&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'db'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'seeds'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'*.rb'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;sort&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;load&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;创建Rake task之后，我把我的多个Seed文件放到&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;db/seeds&lt;/code&gt;文件夹下，如此一来，只要用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rails db:seed:file_name&lt;/code&gt;就可以Seed一个单独的文件，而不必将整个&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;db/seeds.rb&lt;/code&gt;都更新到数据库中了。&lt;/p&gt; &lt;p&gt;而&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rails db:seed:all&lt;/code&gt;则会导入整个&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;db/seeds&lt;/code&gt;文件夹中的Seed。&lt;/p&gt; &lt;p&gt;另一个值得一提的地方是，Rails的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;find_or_create_by&lt;/code&gt;方法让更新基础数据非常方便。&lt;/p&gt; &lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;no&quot;&gt;Game&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;find_or_create_by&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;name: &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;initial_experience&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;value: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;这样的Seed可以在没有找到条目的时候自动创建，而如果条目已经存在时则直接更新，相当人性化。&lt;/p&gt; &lt;h2 id=&quot;时间&quot;&gt;时间&lt;/h2&gt; &lt;p&gt;我有的是时间吗？似乎也不尽然，开学在即，不知道此后还有多少时间供我挥霍。身边的同学不是在实习，就是在找寻工作，求索落脚之处，或许不知何时起，我也当开始珍惜，珍惜逝去的秋水。&lt;/p&gt; &lt;p&gt;只不过现下还可略作最后的狂欢罢了。&lt;/p&gt;</content><author><name>DotIN13</name></author><category term="Linux"/><category term="Ruby"/><category term="Ruby on Rails"/><category term="WoD"/><summary type="html">Development must go on…</summary></entry></feed>