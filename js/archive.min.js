(function(){function e(){var e,t=0,n={},o=window.location.search.substring(1),s=o.split("&");for(t=0;t<s.length;t++)e=s[t].split("="),void 0===n[e[0]]?n[e[0]]=e[1]:"string"==typeof n[e[0]]?n[e[0]]=[n[e[0]],e[1]]:n[e[0]].push(e[1]);return n}function t(){var e=0;document.getElementsByClassName("visited")&&(e=document.getElementsByClassName("visited")[document.getElementsByClassName("visited").length-1].offsetTop);var t=$("[rel='2']").get($("[rel='2']").length-1).offsetTop;return e>t?e:t}function n(e){return e?($("[rel='1']").toggleClass("hover").promise().done(function(){var e=t();$("#tag_cloud").css("height",e+document.querySelector("#tag_cloud a").offsetHeight+8-l+"px"),$("[rel='1']").toggleClass("hover"),setTimeout(function(){$("[rel='1']").toggleClass("hover")},450)}),!1):($("[rel='1']").toggleClass("hover").promise().done(function(){$("#tag_cloud").css("height",document.getElementById("tag_cloud").scrollHeight+"px")}),!0)}var o,s=(o=window.location.href.split("?")[0],function(e){"string"==typeof e?window.history.replaceState(null,"",o+e):window.history.replaceState(null,"",o)});$(document).ready(function(){function t(){var e,t=0;for(e=0;e<c.length;e++)f.push(t),t+=c.eq(e).find(".item").length;f.push(t)}function n(e){if(!e)return r;var t=i.filter('[data-encode="'+e+'"]');return 0===t.length?r:t}function o(e){e&&(e.addClass("focus"),e.addClass("visited"),g&&!g.is(e)&&g.removeClass("focus"),g=e)}function a(e,t){var a,l,i,r,g,f={};for(l=0;l<u.length;l++)for(a=u[l],i=0;i<a.length;i++)if(""===e||void 0===e)f[l]||(f[l]={}),f[l][i]=!0;else{var m=a.eq(i).data("tags").split(",");for(r=0;r<m.length;r++)if(m[r]===e){f[l]||(f[l]={}),f[l][i]=!0;break}}for(l=0;l<u.length;l++)for(f[l]&&c.eq(l).removeClass("d-none"),f[l]||c.eq(l).addClass("d-none"),i=0;i<u[l].length;i++)f[l]&&f[l][i]?u[l].eq(i).removeClass("d-none"):u[l].eq(i).addClass("d-none");h||(d.removeClass("d-none"),h=!0),t?(o(t),g=t.attr("data-encode"),""===g||"string"!=typeof g?s():s("?tag="+g)):o(n(e))}var l=$(".js-tags"),i=l.find(".tag-button"),r=l.find(".tag-button--all"),d=$(".js-result"),c=d.find("section"),u=[],g=null,f=[],h=!1;c.each(function(){u.push($(this).find(".item"))});var m=e(),v=m.tag;t(),a(v),l.on("click","a",function(){a($(this).data("encode"),$(this))})});var a=!1,l=document.querySelector("#tag_cloud a").offsetTop;$(document).ready(function(){var e=document.getElementById("tag_cloud").scrollHeight;$("#tag_cloud").css("height",e+"px")}),window.innerWidth>=768&&$("#tag_cloud").hover(function(){a=n(a)},function(){a=n(a)}),$("#show-tags").click(function(){a=n(a),$(".icon-expand_more").length?$(".icon-expand_more").removeClass("icon-expand_more").addClass("icon-expand_less"):$(".icon-expand_less").removeClass("icon-expand_less").addClass("icon-expand_more")})})();