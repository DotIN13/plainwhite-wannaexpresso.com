(function(){function e(){var e,t=0,n={},o=window.location.search.substring(1),a=o.split("&");for(t=0;t<a.length;t++)e=a[t].split("="),void 0===n[e[0]]?n[e[0]]=e[1]:"string"==typeof n[e[0]]?n[e[0]]=[n[e[0]],e[1]]:n[e[0]].push(e[1]);return n}function t(e){return e?($("[rel='1']").toggleClass("hover").promise().done(function(){var e=document.getElementsByClassName("visited")[document.getElementsByClassName("visited").length-1].offsetTop,t=$("[rel='2']").get($("[rel='2']").length-1).offsetTop,n=e>t?e:t;$("#tag_cloud").css("height",n+36-l+"px"),$("[rel='1']").toggleClass("hover"),setTimeout(function(){$("[rel='1']").toggleClass("hover")},450)}),!1):($("[rel='1']").toggleClass("hover").promise().done(function(){$("#tag_cloud").css("height",document.getElementById("tag_cloud").scrollHeight+"px")}),!0)}var n,o=(n=window.location.href.split("?")[0],function(e){"string"==typeof e?window.history.replaceState(null,"",n+e):window.history.replaceState(null,"",n)});$(document).ready(function(){function t(){var e,t=0;for(e=0;e<c.length;e++)g.push(t),t+=c.eq(e).find(".item").length;g.push(t)}function n(e){if(!e)return i;var t=r.filter('[data-encode="'+e+'"]');return 0===t.length?i:t}function a(e){e&&(e.addClass("focus"),e.addClass("visited"),f&&!f.is(e)&&f.removeClass("focus"),f=e)}function s(e,t){var s,l,r,i,f,g={};for(l=0;l<u.length;l++)for(s=u[l],r=0;r<s.length;r++)if(""===e||void 0===e)g[l]||(g[l]={}),g[l][r]=!0;else{var v=s.eq(r).data("tags").split(",");for(i=0;i<v.length;i++)if(v[i]===e){g[l]||(g[l]={}),g[l][r]=!0;break}}for(l=0;l<u.length;l++)for(g[l]&&c.eq(l).removeClass("d-none"),g[l]||c.eq(l).addClass("d-none"),r=0;r<u[l].length;r++)g[l]&&g[l][r]?u[l].eq(r).removeClass("d-none"):u[l].eq(r).addClass("d-none");h||(d.removeClass("d-none"),h=!0),t?(a(t),f=t.attr("data-encode"),""===f||"string"!=typeof f?o():o("?tag="+f)):a(n(e))}var l=$(".js-tags"),r=l.find(".tag-button"),i=l.find(".tag-button--all"),d=$(".js-result"),c=d.find("section"),u=[],f=null,g=[],h=!1;c.each(function(){u.push($(this).find(".item"))});var v=e(),p=v.tag;t(),s(p),l.on("click","a",function(){s($(this).data("encode"),$(this))})});var a=!1,s=$("#tag_cloud").height();$("#tag_cloud").css("height",s+"px");var l=$("[rel='2']").get($("[rel='2']").length-1).offsetTop+28-document.getElementById("tag_cloud").scrollHeight;window.innerWidth>=768&&$("#tag_cloud").hover(function(){a=t(a)},function(){a=t(a)}),$("#show-tags").click(function(){a=t(a),$(".fa-caret-square-down").length?$(".fa-caret-square-down").removeClass("fa-caret-square-down").addClass("fa-caret-square-up"):$(".fa-caret-square-up").removeClass("fa-caret-square-up").addClass("fa-caret-square-down")})})();